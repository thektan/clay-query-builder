window.oDataParser=function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.stringify=function(e,t,a){return Array.prototype.map.call(e.slice(t,a),function(e){return String.fromCharCode(e)}).join("")},e.is=function(e,t){for(var a=0;a<t.length;a++)if(e===t.charCodeAt(a))return!0;return!1},e.equals=function(e,t,a){for(var n=0;e[t+n]===a.charCodeAt(n)&&n<a.length;)n++;return n===a.length?n:0},e.required=function(e,t,a,n,r){var i=0;for(r=r||e.length-t;i<r&&a(e[t+i]);)i++;return i>=(n||0)&&i<=r?t+i:0}}(n=t.Utils||(t.Utils={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0);!function(e){e.Literal="Literal",e.ArrayOrObject="ArrayOrObject",e.Array="Array",e.Object="Object",e.Property="Property",e.Annotation="Annotation",e.Enum="Enum",e.EnumValue="EnumValue",e.EnumMemberValue="EnumMemberValue",e.Identifier="Identifier",e.QualifiedEntityTypeName="QualifiedEntityTypeName",e.QualifiedComplexTypeName="QualifiedComplexTypeName",e.ODataIdentifier="ODataIdentifier",e.Collection="Collection",e.NamespacePart="NamespacePart",e.EntitySetName="EntitySetName",e.SingletonEntity="SingletonEntity",e.EntityTypeName="EntityTypeName",e.ComplexTypeName="ComplexTypeName",e.TypeDefinitionName="TypeDefinitionName",e.EnumerationTypeName="EnumerationTypeName",e.EnumerationMember="EnumerationMember",e.TermName="TermName",e.PrimitiveProperty="PrimitiveProperty",e.PrimitiveKeyProperty="PrimitiveKeyProperty",e.PrimitiveNonKeyProperty="PrimitiveNonKeyProperty",e.PrimitiveCollectionProperty="PrimitiveCollectionProperty",e.ComplexProperty="ComplexProperty",e.ComplexCollectionProperty="ComplexCollectionProperty",e.StreamProperty="StreamProperty",e.NavigationProperty="NavigationProperty",e.EntityNavigationProperty="EntityNavigationProperty",e.EntityCollectionNavigationProperty="EntityCollectionNavigationProperty",e.Action="Action",e.ActionImport="ActionImport",e.Function="Function",e.EntityFunction="EntityFunction",e.EntityCollectionFunction="EntityCollectionFunction",e.ComplexFunction="ComplexFunction",e.ComplexCollectionFunction="ComplexCollectionFunction",e.PrimitiveFunction="PrimitiveFunction",e.PrimitiveCollectionFunction="PrimitiveCollectionFunction",e.EntityFunctionImport="EntityFunctionImport",e.EntityCollectionFunctionImport="EntityCollectionFunctionImport",e.ComplexFunctionImport="ComplexFunctionImport",e.ComplexCollectionFunctionImport="ComplexCollectionFunctionImport",e.PrimitiveFunctionImport="PrimitiveFunctionImport",e.PrimitiveCollectionFunctionImport="PrimitiveCollectionFunctionImport",e.CommonExpression="CommonExpression",e.AndExpression="AndExpression",e.OrExpression="OrExpression",e.EqualsExpression="EqualsExpression",e.NotEqualsExpression="NotEqualsExpression",e.LesserThanExpression="LesserThanExpression",e.LesserOrEqualsExpression="LesserOrEqualsExpression",e.GreaterThanExpression="GreaterThanExpression",e.GreaterOrEqualsExpression="GreaterOrEqualsExpression",e.HasExpression="HasExpression",e.AddExpression="AddExpression",e.SubExpression="SubExpression",e.MulExpression="MulExpression",e.DivExpression="DivExpression",e.ModExpression="ModExpression",e.NotExpression="NotExpression",e.BoolParenExpression="BoolParenExpression",e.ParenExpression="ParenExpression",e.MethodCallExpression="MethodCallExpression",e.IsOfExpression="IsOfExpression",e.CastExpression="CastExpression",e.NegateExpression="NegateExpression",e.FirstMemberExpression="FirstMemberExpression",e.MemberExpression="MemberExpression",e.PropertyPathExpression="PropertyPathExpression",e.ImplicitVariableExpression="ImplicitVariableExpression",e.LambdaVariable="LambdaVariable",e.LambdaVariableExpression="LambdaVariableExpression",e.LambdaPredicateExpression="LambdaPredicateExpression",e.AnyExpression="AnyExpression",e.AllExpression="AllExpression",e.CollectionNavigationExpression="CollectionNavigationExpression",e.SimpleKey="SimpleKey",e.CompoundKey="CompoundKey",e.KeyValuePair="KeyValuePair",e.KeyPropertyValue="KeyPropertyValue",e.KeyPropertyAlias="KeyPropertyAlias",e.SingleNavigationExpression="SingleNavigationExpression",e.CollectionPathExpression="CollectionPathExpression",e.ComplexPathExpression="ComplexPathExpression",e.SinglePathExpression="SinglePathExpression",e.FunctionExpression="FunctionExpression",e.FunctionExpressionParameters="FunctionExpressionParameters",e.FunctionExpressionParameter="FunctionExpressionParameter",e.ParameterName="ParameterName",e.ParameterAlias="ParameterAlias",e.ParameterValue="ParameterValue",e.CountExpression="CountExpression",e.RefExpression="RefExpression",e.ValueExpression="ValueExpression",e.RootExpression="RootExpression",e.QueryOptions="QueryOptions",e.CustomQueryOption="CustomQueryOption",e.Expand="Expand",e.ExpandItem="ExpandItem",e.ExpandPath="ExpandPath",e.ExpandCountOption="ExpandCountOption",e.ExpandRefOption="ExpandRefOption",e.ExpandOption="ExpandOption",e.Levels="Levels",e.Search="Search",e.SearchExpression="SearchExpression",e.SearchParenExpression="SearchParenExpression",e.SearchNotExpression="SearchNotExpression",e.SearchOrExpression="SearchOrExpression",e.SearchAndExpression="SearchAndExpression",e.SearchTerm="SearchTerm",e.SearchPhrase="SearchPhrase",e.SearchWord="SearchWord",e.Filter="Filter",e.OrderBy="OrderBy",e.OrderByItem="OrderByItem",e.Skip="Skip",e.Top="Top",e.Format="Format",e.InlineCount="InlineCount",e.Select="Select",e.SelectItem="SelectItem",e.SelectPath="SelectPath",e.AliasAndValue="AliasAndValue",e.SkipToken="SkipToken",e.Id="Id",e.Crossjoin="Crossjoin",e.AllResource="AllResource",e.ActionImportCall="ActionImportCall",e.FunctionImportCall="FunctionImportCall",e.EntityCollectionFunctionImportCall="EntityCollectionFunctionImportCall",e.EntityFunctionImportCall="EntityFunctionImportCall",e.ComplexCollectionFunctionImportCall="ComplexCollectionFunctionImportCall",e.ComplexFunctionImportCall="ComplexFunctionImportCall",e.PrimitiveCollectionFunctionImportCall="PrimitiveCollectionFunctionImportCall",e.PrimitiveFunctionImportCall="PrimitiveFunctionImportCall",e.FunctionParameters="FunctionParameters",e.FunctionParameter="FunctionParameter",e.ResourcePath="ResourcePath",e.CollectionNavigation="CollectionNavigation",e.CollectionNavigationPath="CollectionNavigationPath",e.SingleNavigation="SingleNavigation",e.PropertyPath="PropertyPath",e.ComplexPath="ComplexPath",e.BoundOperation="BoundOperation",e.BoundActionCall="BoundActionCall",e.BoundEntityFunctionCall="BoundEntityFunctionCall",e.BoundEntityCollectionFunctionCall="BoundEntityCollectionFunctionCall",e.BoundComplexFunctionCall="BoundComplexFunctionCall",e.BoundComplexCollectionFunctionCall="BoundComplexCollectionFunctionCall",e.BoundPrimitiveFunctionCall="BoundPrimitiveFunctionCall",e.BoundPrimitiveCollectionFunctionCall="BoundPrimitiveCollectionFunctionCall",e.ODataUri="ODataUri",e.Batch="Batch",e.Entity="Entity",e.Metadata="Metadata"}(n=t.TokenType||(t.TokenType={})),t.LexerTokenType=n;var i,o=function(){return function(e){this.position=e.position,this.next=e.next,this.value=e.value,this.type=e.type,this.raw=e.raw,e.metadata&&(this.metadata=e.metadata)}}();t.Token=o,t.LexerToken=o,function(e){function a(e){return e>=48&&e<=57}e.Token=t.Token,e.TokenType=t.TokenType,e.tokenize=function(e,a,n,i,o,u){var l=new t.Token({position:a,next:n,value:i,type:o,raw:r.default.stringify(e,a,n)});return u&&u.metadata&&(l.metadata=u.metadata,delete u.metadata),l},e.clone=function(e){return new t.Token({position:e.position,next:e.next,value:e.value,type:e.type,raw:e.raw})},e.ALPHA=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128},e.DIGIT=a,e.HEXDIG=function(t){return e.DIGIT(t)||e.AtoF(t)},e.AtoF=function(e){return e>=65&&e<=70||e>=97&&e<=102},e.DQUOTE=function(e){return 34===e},e.SP=function(e){return 32===e},e.HTAB=function(e){return 9===e},e.VCHAR=function(e){return e>=33&&e<=126},e.whitespaceLength=function(t,a){return r.default.equals(t,a,"%20")||r.default.equals(t,a,"%09")?3:e.SP(t[a])||e.HTAB(t[a])||32===t[a]||9===t[a]?1:void 0},e.OWS=function(t,a){a=a||0;for(var n=e.whitespaceLength(t,a);n;)a+=n,n=e.whitespaceLength(t,a);return a},e.RWS=function(t,a){return e.OWS(t,a)},e.BWS=function(t,a){return e.OWS(t,a)},e.AT=function(e,t){return 64===e[t]?t+1:r.default.equals(e,t,"%40")?t+3:void 0},e.COLON=function(e,t){return 58===e[t]?t+1:r.default.equals(e,t,"%3A")?t+3:void 0},e.COMMA=function(e,t){return 44===e[t]?t+1:r.default.equals(e,t,"%2C")?t+3:void 0},e.EQ=function(e,t){if(61===e[t])return t+1},e.SIGN=function(e,t){return 43===e[t]||45===e[t]?t+1:r.default.equals(e,t,"%2B")?t+3:void 0},e.SEMI=function(e,t){return 59===e[t]?t+1:r.default.equals(e,t,"%3B")?t+3:void 0},e.STAR=function(e,t){return 42===e[t]?t+1:r.default.equals(e,t,"%2A")?t+3:void 0},e.SQUOTE=function(e,t){return 39===e[t]?t+1:r.default.equals(e,t,"%27")?t+3:void 0},e.OPEN=function(e,t){return 40===e[t]?t+1:r.default.equals(e,t,"%28")?t+3:void 0},e.CLOSE=function(e,t){return 41===e[t]?t+1:r.default.equals(e,t,"%29")?t+3:void 0},e.unreserved=function(t){return e.ALPHA(t)||e.DIGIT(t)||45===t||46===t||95===t||126===t},e.otherDelims=function(t,a){return 33===t[a]||43===t[a]?a+1:e.OPEN(t,a)||e.CLOSE(t,a)||e.STAR(t,a)||e.COMMA(t,a)||e.SEMI(t,a)},e.subDelims=function(t,a){return 36===t[a]||38===t[a]?a+1:e.SQUOTE(t,a)||e.EQ(t,a)||e.otherDelims(t,a)},e.pctEncoded=function(t,a){return 37===t[a]&&e.HEXDIG(t[a+1])&&e.HEXDIG(t[a+2])?a+3:a},e.pctEncodedNoSQUOTE=function(t,a){return r.default.equals(t,a,"%27")?a:e.pctEncoded(t,a)},e.pctEncodedUnescaped=function(t,a){return r.default.equals(t,a,"%22")||r.default.equals(t,a,"%3")||r.default.equals(t,a,"%4")||r.default.equals(t,a,"%5C")?a:e.pctEncoded(t,a)},e.pchar=function(t,a){return e.unreserved(t[a])?a+1:e.subDelims(t,a)||e.COLON(t,a)||e.AT(t,a)||e.pctEncoded(t,a)||a},e.pcharNoSQUOTE=function(t,a){return e.unreserved(t[a])||36===t[a]||38===t[a]?a+1:e.otherDelims(t,a)||e.EQ(t,a)||e.COLON(t,a)||e.AT(t,a)||e.pctEncodedNoSQUOTE(t,a)||a},e.qcharNoAMP=function(t,a){return e.unreserved(t[a])||58===t[a]||64===t[a]||47===t[a]||63===t[a]||36===t[a]||39===t[a]||61===t[a]?a+1:e.pctEncoded(t,a)||e.otherDelims(t,a)||a},e.qcharNoAMPDQUOTE=function(t,a){return a=e.BWS(t,a),e.unreserved(t[a])||58===t[a]||64===t[a]||47===t[a]||63===t[a]||36===t[a]||39===t[a]||61===t[a]?a+1:e.otherDelims(t,a)||e.pctEncodedUnescaped(t,a)},e.base64char=function(t){return e.ALPHA(t)||e.DIGIT(t)||45===t||95===t},e.base64b16=function(t,a){var n=a;return e.base64char(t[a])||e.base64char(t[a+1])?(a+=2,r.default.is(t[a],"AEIMQUYcgkosw048")?(61===t[++a]&&a++,a):n):n},e.base64b8=function(t,a){var n=a;return e.base64char(t[a])?65!==t[++a]||81!==t[a]||103!==t[a]||119!==t[a]?n:(61===t[++a]&&61===t[a+1]&&(a+=2),a):n},e.nanInfinity=function(e,t){return r.default.equals(e,t,"NaN")||r.default.equals(e,t,"-INF")||r.default.equals(e,t,"INF")},e.oneToNine=function(t){return 48!==t&&e.DIGIT(t)},e.zeroToFiftyNine=function(t,a){return t[a]>=48&&t[a]<=53&&e.DIGIT(t[a+1])?a+2:a},e.year=function(t,a){var n=a,i=a;return 45===t[a]&&a++,48===t[a]&&(i=r.default.required(t,a+1,e.DIGIT,3,3))||e.oneToNine(t[a])&&(i=r.default.required(t,a+1,e.DIGIT,3))?i:n},e.month=function(t,a){return 48===t[a]&&e.oneToNine(t[a+1])||49===t[a]&&t[a+1]>=48&&t[a+1]<=50?a+2:a},e.day=function(t,a){return 48===t[a]&&e.oneToNine(t[a+1])||(49===t[a]||50===t[a])&&e.DIGIT(t[a+1])||51===t[a]&&(48===t[a+1]||49===t[a+1])?a+2:a},e.hour=function(t,a){return(48===t[a]||49===t[a])&&e.DIGIT(t[a+1])||50===t[a]&&(48===t[a+1]||49===t[a+1]||50===t[a+1]||51===t[a+1])?a+2:a},e.minute=function(t,a){return e.zeroToFiftyNine(t,a)},e.second=function(t,a){return e.zeroToFiftyNine(t,a)},e.fractionalSeconds=function(e,t){return r.default.required(e,t,a,1,12)},e.geographyPrefix=function(e,t){return r.default.equals(e,t,"geography")?t+9:t},e.geometryPrefix=function(e,t){return r.default.equals(e,t,"geometry")?t+8:t},e.identifierLeadingCharacter=function(t){return e.ALPHA(t)||95===t},e.identifierCharacter=function(t){return e.identifierLeadingCharacter(t)||e.DIGIT(t)},e.beginObject=function(t,a){var n=e.BWS(t,a),i=a;return a=n,r.default.equals(t,a,"{")?a++:r.default.equals(t,a,"%7B")&&(a+=3),a===n?i:n=e.BWS(t,a)},e.endObject=function(t,a){var n=e.BWS(t,a),i=a;return a=n,r.default.equals(t,a,"}")?a++:r.default.equals(t,a,"%7D")&&(a+=3),a===n?i:n=e.BWS(t,a)},e.beginArray=function(t,a){var n=e.BWS(t,a),i=a;return a=n,r.default.equals(t,a,"[")?a++:r.default.equals(t,a,"%5B")&&(a+=3),a===n?i:n=e.BWS(t,a)},e.endArray=function(t,a){var n=e.BWS(t,a),i=a;return a=n,r.default.equals(t,a,"]")?a++:r.default.equals(t,a,"%5D")&&(a+=3),a===n?i:n=e.BWS(t,a)},e.quotationMark=function(t,a){return e.DQUOTE(t[a])?a+1:r.default.equals(t,a,"%22")?a+3:a},e.nameSeparator=function(t,a){var n=e.BWS(t,a),r=a;a=n;var i=e.COLON(t,a);return i?(a=i,n=e.BWS(t,a)):r},e.valueSeparator=function(t,a){var n=e.BWS(t,a),r=a;a=n;var i=e.COMMA(t,a);return i?(a=i,n=e.BWS(t,a)):r},e.escape=function(e,t){return r.default.equals(e,t,"\\")?t+1:r.default.equals(e,t,"%5C")?t+3:t}}(i=t.Lexer||(t.Lexer={})),t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(3);!function(e){e.nullValue=function(e,t){if(r.default.equals(e,t,"null"))return i.default.tokenize(e,t,t+4,"null",i.default.TokenType.Literal)},e.booleanValue=function(e,t){return r.default.equals(e,t,"true")?i.default.tokenize(e,t,t+4,"Edm.Boolean",i.default.TokenType.Literal):r.default.equals(e,t,"false")?i.default.tokenize(e,t,t+5,"Edm.Boolean",i.default.TokenType.Literal):void 0},e.guidValue=function(e,t){if(r.default.required(e,t,i.default.HEXDIG,8,8)&&45===e[t+8]&&r.default.required(e,t+9,i.default.HEXDIG,4,4)&&45===e[t+13]&&r.default.required(e,t+14,i.default.HEXDIG,4,4)&&45===e[t+18]&&r.default.required(e,t+19,i.default.HEXDIG,4,4)&&45===e[t+23]&&r.default.required(e,t+24,i.default.HEXDIG,12))return i.default.tokenize(e,t,t+36,"Edm.Guid",i.default.TokenType.Literal)},e.sbyteValue=function(e,t){var a=t,n=i.default.SIGN(e,t);n&&(t=n);var o=r.default.required(e,t,i.default.DIGIT,1,3);if(o){if(i.default.DIGIT(e[o]))return;var u=parseInt(r.default.stringify(e,a,o),10);if(u>=-128&&u<=127)return i.default.tokenize(e,a,o,"Edm.SByte",i.default.TokenType.Literal)}},e.byteValue=function(e,t){var a=r.default.required(e,t,i.default.DIGIT,1,3);if(a){if(i.default.DIGIT(e[a]))return;var n=parseInt(r.default.stringify(e,t,a),10);if(n>=0&&n<=255)return i.default.tokenize(e,t,a,"Edm.Byte",i.default.TokenType.Literal)}},e.int16Value=function(e,t){var a=t,n=i.default.SIGN(e,t);n&&(t=n);var o=r.default.required(e,t,i.default.DIGIT,1,5);if(o){if(i.default.DIGIT(e[o]))return;var u=parseInt(r.default.stringify(e,a,o),10);if(u>=-32768&&u<=32767)return i.default.tokenize(e,a,o,"Edm.Int16",i.default.TokenType.Literal)}},e.int32Value=function(e,t){var a=t,n=i.default.SIGN(e,t);n&&(t=n);var o=r.default.required(e,t,i.default.DIGIT,1,10);if(o){if(i.default.DIGIT(e[o]))return;var u=parseInt(r.default.stringify(e,a,o),10);if(u>=-2147483648&&u<=2147483647)return i.default.tokenize(e,a,o,"Edm.Int32",i.default.TokenType.Literal)}},e.int64Value=function(e,t){var a=t,n=i.default.SIGN(e,t);n&&(t=n);var o=r.default.required(e,t,i.default.DIGIT,1,19);if(o){if(i.default.DIGIT(e[o]))return;var u=r.default.stringify(e,t,o);if(u>="0"&&u<=(45===e[a]?"9223372036854775808":"9223372036854775807"))return i.default.tokenize(e,a,o,"Edm.Int64",i.default.TokenType.Literal)}},e.decimalValue=function(e,t){var a=t,n=i.default.SIGN(e,t);n&&(t=n);var o=r.default.required(e,t,i.default.DIGIT,1);if(o){var u=o;if(46===e[o]&&(u=r.default.required(e,o+1,i.default.DIGIT,1))&&u!==o+1&&101!==e[u])return i.default.tokenize(e,a,u,"Edm.Decimal",i.default.TokenType.Literal)}},e.doubleValue=function(e,t){var a=t,n=t,o=i.default.nanInfinity(e,t);if(o)n+=o;else{var u=i.default.SIGN(e,t);u&&(t=u);var l=r.default.required(e,t,i.default.DIGIT,1);if(!l)return;var f=l;if(46!==e[l])return;if((f=r.default.required(e,l+1,i.default.DIGIT,1))===l+1)return;if(101===e[f]){var d=f+1,p=i.default.SIGN(e,d);p&&(d=p);var c=r.default.required(e,d,i.default.DIGIT,1);c&&(n=c)}else n=f}return i.default.tokenize(e,a,n,"Edm.Double",i.default.TokenType.Literal)},e.singleValue=function(t,a){var n=e.doubleValue(t,a);return n&&(n.value="Edm.Single"),n},e.stringValue=function(e,t){var a=t,n=i.default.SQUOTE(e,a);if(n){for(t=n;t<e.length;)if(n=i.default.SQUOTE(e,t)){if(t=n,!(n=i.default.SQUOTE(e,t))){var r=i.default.CLOSE(e,t),o=i.default.COMMA(e,t),u=38===e[t];if(i.default.pcharNoSQUOTE(e,t)>t&&!u&&!r&&!o&&i.default.RWS(e,t)===t)return;break}t=n}else{var l=Math.max(i.default.RWS(e,t),i.default.pcharNoSQUOTE(e,t));if(l===t)return;t=l}if(!(n=i.default.SQUOTE(e,t-1)||i.default.SQUOTE(e,t-3)))return;return t=n,i.default.tokenize(e,a,t,"Edm.String",i.default.TokenType.Literal)}},e.durationValue=function(e,t){if(r.default.equals(e,t,"duration")){var a=t;t+=8;var n=i.default.SQUOTE(e,t);if(n){t=n;var o=i.default.SIGN(e,t);if(o&&(t=o),80===e[t]){t++;var u=r.default.required(e,t,i.default.DIGIT,1);if(u!==t||84===e[t+1]){68===e[t=u]&&t++;var l=t;if(84===e[t]){t++;var f=function(){if(i.default.SQUOTE(e,t))return t;var a=r.default.required(e,t,i.default.DIGIT,1);if(a!==t){if(83===e[t=a])return l=t+1;if(46===e[t]){t++;var n=r.default.required(e,t,i.default.DIGIT,1);if(n===t||83!==e[n])return;return l=n+1}return 72===e[t]?(l=++t,f()):77===e[t]?(l=++t,f()):void 0}};if(!f())return}if(n=i.default.SQUOTE(e,l))return l=n,i.default.tokenize(e,a,l,"Edm.Duration",i.default.TokenType.Literal)}}}}},e.binaryValue=function(e,t){var a=t;if(r.default.equals(e,t,"binary")){t+=6;var n=i.default.SQUOTE(e,t);if(n){for(t=n;t<e.length&&!(n=i.default.SQUOTE(e,t));){var o=Math.max(i.default.base64b16(e,t),i.default.base64b8(e,t));o>t?t=o:i.default.base64char(e[t])&&i.default.base64char(e[t+1])&&i.default.base64char(e[t+2])&&i.default.base64char(e[t+3])?t+=4:t++}return t=n,i.default.tokenize(e,a,t,"Edm.Binary",i.default.TokenType.Literal)}}},e.dateValue=function(e,t){var a=i.default.year(e,t);if(a!==t&&45===e[a]){var n=i.default.month(e,a+1);if(n!==a+1&&45===e[n]){var r=i.default.day(e,n+1);if(r!==n+1&&84!==e[r])return i.default.tokenize(e,t,r,"Edm.Date",i.default.TokenType.Literal)}}},e.dateTimeOffsetValue=function(e,t){var a=i.default.year(e,t);if(a!==t&&45===e[a]){var n=i.default.month(e,a+1);if(n!==a+1&&45===e[n]){var r=i.default.day(e,n+1);if(r!==n+1&&84===e[r]){var o=i.default.hour(e,r+1),u=i.default.COLON(e,o);if(o!==u&&u){var l=i.default.minute(e,o+1);if(l!==o+1){var f=l;if(u=i.default.COLON(e,l)){var d=i.default.second(e,u);if(d===u)return;if(46===e[d]){var p=i.default.fractionalSeconds(e,d+1);if(p===d+1)return;f=p}else f=d}var c=i.default.SIGN(e,f);if(90===e[f])f++;else{if(!c)return;var s=i.default.hour(e,c),y=i.default.COLON(e,s);if(s===c||!y)return;var m=i.default.minute(e,y);if(m===y)return;f=m}return i.default.tokenize(e,t,f,"Edm.DateTimeOffset",i.default.TokenType.Literal)}}}}}},e.timeOfDayValue=function(e,t){var a=i.default.hour(e,t),n=i.default.COLON(e,a);if(a!==t&&n){var r=i.default.minute(e,n);if(r!==n){var o=r;if(n=i.default.COLON(e,r)){var u=i.default.second(e,n);if(u===n)return;if(46===e[u]){var l=i.default.fractionalSeconds(e,u+1);if(l===u+1)return;o=l}else o=u}return i.default.tokenize(e,t,o,"Edm.TimeOfDay",i.default.TokenType.Literal)}}},e.positionLiteral=function(t,a){var n=e.doubleValue(t,a);if(n){var r=i.default.RWS(t,n.next);if(r!==n.next){var o=e.doubleValue(t,r);if(o)return i.default.tokenize(t,a,o.next,{longitude:n,latitude:o},i.default.TokenType.Literal)}}},e.pointData=function(t,a){var n=i.default.OPEN(t,a);if(n){var r=a;a=n;var o=e.positionLiteral(t,a);if(o){a=o.next;var u=i.default.CLOSE(t,a);if(u)return a=u,i.default.tokenize(t,r,a,o,i.default.TokenType.Literal)}}},e.lineStringData=function(t,a){return e.multiGeoLiteralFactory(t,a,"",e.positionLiteral)},e.ringLiteral=function(t,a){return e.multiGeoLiteralFactory(t,a,"",e.positionLiteral)},e.polygonData=function(t,a){return e.multiGeoLiteralFactory(t,a,"",e.ringLiteral)},e.sridLiteral=function(e,t){if(r.default.equals(e,t,"SRID")){var a=t;if(t+=4,i.default.EQ(e,t)){t++;var n=r.default.required(e,t,i.default.DIGIT,1,5);if(n){t=n;var o=i.default.SEMI(e,t);if(o)return t=o,i.default.tokenize(e,a,t,"SRID",i.default.TokenType.Literal)}}}},e.pointLiteral=function(t,a){if(r.default.equals(t,a,"Point")){var n=a;a+=5;var o=e.pointData(t,a);if(o)return i.default.tokenize(t,n,o.next,o,i.default.TokenType.Literal)}},e.polygonLiteral=function(t,a){if(r.default.equals(t,a,"Polygon")){var n=a;a+=7;var o=e.polygonData(t,a);if(o)return i.default.tokenize(t,n,o.next,o,i.default.TokenType.Literal)}},e.collectionLiteral=function(t,a){return e.multiGeoLiteralFactory(t,a,"Collection",e.geoLiteral)},e.lineStringLiteral=function(t,a){if(r.default.equals(t,a,"LineString")){var n=a;a+=10;var o=e.lineStringData(t,a);if(o)return a=o.next,i.default.tokenize(t,n,a,o,i.default.TokenType.Literal)}},e.multiLineStringLiteral=function(t,a){return e.multiGeoLiteralOptionalFactory(t,a,"MultiLineString",e.lineStringData)},e.multiPointLiteral=function(t,a){return e.multiGeoLiteralOptionalFactory(t,a,"MultiPoint",e.pointData)},e.multiPolygonLiteral=function(t,a){return e.multiGeoLiteralOptionalFactory(t,a,"MultiPolygon",e.polygonData)},e.multiGeoLiteralFactory=function(e,t,a,n){if(r.default.equals(e,t,a+"(")){var o=t,u=[],l=n(e,t+=a.length+1);if(l){for(t=l.next;l;){u.push(l);var f=i.default.CLOSE(e,t);if(f){t=f;break}var d=i.default.COMMA(e,t);if(!d)return;if(!(l=n(e,t=d)))return;t=l.next}return i.default.tokenize(e,o,t,{items:u},i.default.TokenType.Literal)}}},e.multiGeoLiteralOptionalFactory=function(e,t,a,n){if(r.default.equals(e,t,a+"(")){var o=t;t+=a.length+1;var u=[],l=i.default.CLOSE(e,t);if(l)t++;else{var f=n(e,t);if(!f)return;for(t=f.next;f;){if(u.push(f),l=i.default.CLOSE(e,t)){t=l;break}var d=i.default.COMMA(e,t);if(!d)return;if(!(f=n(e,t=d)))return;t=f.next}}return i.default.tokenize(e,o,t,{items:u},i.default.TokenType.Literal)}},e.geoLiteral=function(t,a){return e.collectionLiteral(t,a)||e.lineStringLiteral(t,a)||e.multiPointLiteral(t,a)||e.multiLineStringLiteral(t,a)||e.multiPolygonLiteral(t,a)||e.pointLiteral(t,a)||e.polygonLiteral(t,a)},e.fullPointLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.pointLiteral)},e.fullCollectionLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.collectionLiteral)},e.fullLineStringLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.lineStringLiteral)},e.fullMultiLineStringLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.multiLineStringLiteral)},e.fullMultiPointLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.multiPointLiteral)},e.fullMultiPolygonLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.multiPolygonLiteral)},e.fullPolygonLiteral=function(t,a){return e.fullGeoLiteralFactory(t,a,e.polygonLiteral)},e.fullGeoLiteralFactory=function(t,a,n){var r=e.sridLiteral(t,a);if(r){var o=n(t,r.next);if(o)return i.default.tokenize(t,a,o.next,{srid:r,value:o},i.default.TokenType.Literal)}},e.geographyCollection=function(t,a){var n=i.default.geographyPrefix(t,a);if(n!==a){var r=a;a=n;var o=i.default.SQUOTE(t,a);if(o){a=o;var u=e.fullCollectionLiteral(t,a);if(u&&(a=u.next,o=i.default.SQUOTE(t,a)))return a=o,i.default.tokenize(t,r,a,"Edm.GeographyCollection",i.default.TokenType.Literal)}}},e.geographyLineString=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyLineString",i.default.geographyPrefix,e.fullLineStringLiteral)},e.geographyMultiLineString=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyMultiLineString",i.default.geographyPrefix,e.fullMultiLineStringLiteral)},e.geographyMultiPoint=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyMultiPoint",i.default.geographyPrefix,e.fullMultiPointLiteral)},e.geographyMultiPolygon=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyMultiPolygon",i.default.geographyPrefix,e.fullMultiPolygonLiteral)},e.geographyPoint=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyPoint",i.default.geographyPrefix,e.fullPointLiteral)},e.geographyPolygon=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeographyPolygon",i.default.geographyPrefix,e.fullPolygonLiteral)},e.geometryCollection=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryCollection",i.default.geometryPrefix,e.fullCollectionLiteral)},e.geometryLineString=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryLineString",i.default.geometryPrefix,e.fullLineStringLiteral)},e.geometryMultiLineString=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryMultiLineString",i.default.geometryPrefix,e.fullMultiLineStringLiteral)},e.geometryMultiPoint=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryMultiPoint",i.default.geometryPrefix,e.fullMultiPointLiteral)},e.geometryMultiPolygon=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryMultiPolygon",i.default.geometryPrefix,e.fullMultiPolygonLiteral)},e.geometryPoint=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryPoint",i.default.geometryPrefix,e.fullPointLiteral)},e.geometryPolygon=function(t,a){return e.geoLiteralFactory(t,a,"Edm.GeometryPolygon",i.default.geometryPrefix,e.fullPolygonLiteral)},e.geoLiteralFactory=function(e,t,a,n,r){var o=n(e,t);if(o!==t){var u=t;t=o;var l=i.default.SQUOTE(e,t);if(l){var f=r(e,t=l);if(f&&(t=f.next,l=i.default.SQUOTE(e,t)))return t=l,i.default.tokenize(e,u,t,a,i.default.TokenType.Literal)}}},e.primitiveLiteral=function(t,a){return e.nullValue(t,a)||e.booleanValue(t,a)||e.guidValue(t,a)||e.dateValue(t,a)||e.dateTimeOffsetValue(t,a)||e.timeOfDayValue(t,a)||e.decimalValue(t,a)||e.doubleValue(t,a)||e.singleValue(t,a)||e.sbyteValue(t,a)||e.byteValue(t,a)||e.int16Value(t,a)||e.int32Value(t,a)||e.int64Value(t,a)||e.stringValue(t,a)||e.durationValue(t,a)||e.binaryValue(t,a)||o.default.enumeration(t,a)||e.geographyCollection(t,a)||e.geographyLineString(t,a)||e.geographyMultiLineString(t,a)||e.geographyMultiPoint(t,a)||e.geographyMultiPolygon(t,a)||e.geographyPoint(t,a)||e.geographyPolygon(t,a)||e.geometryCollection(t,a)||e.geometryLineString(t,a)||e.geometryMultiLineString(t,a)||e.geometryMultiPoint(t,a)||e.geometryMultiPolygon(t,a)||e.geometryPoint(t,a)||e.geometryPolygon(t,a)}}(n=t.PrimitiveLiteral||(t.PrimitiveLiteral={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(2);!function(e){function t(t,a){var n=a,r=e.namespace(t,a);if(r!==a&&46===t[r]){var o=e.enumerationTypeName(t,r+1);if(!o||o.next!==r+1)return i.default.tokenize(t,n,o.next,"EnumTypeName",i.default.TokenType.Identifier)}}e.enumeration=function(a,n){var r=t(a,n);if(r){var o=n;n=r.next;var u=i.default.SQUOTE(a,n);if(u){n=u;var l=e.enumValue(a,n);if(l&&(n=l.next,u=i.default.SQUOTE(a,n)))return n=u,i.default.tokenize(a,o,n,{name:r,value:l},i.default.TokenType.Enum)}}},e.enumValue=function(t,a){var n=e.singleEnumValue(t,a);if(n){for(var r=a,o=[];n;){o.push(n),a=n.next;var u=i.default.COMMA(t,n.next);if(!u)break;a=u,n=e.singleEnumValue(t,a)}return i.default.tokenize(t,r,a,{values:o},i.default.TokenType.EnumValue)}},e.singleEnumValue=function(t,a){return e.enumerationMember(t,a)||e.enumMemberValue(t,a)},e.enumMemberValue=function(e,t){var a=o.default.int64Value(e,t);if(a)return a.type=i.default.TokenType.EnumMemberValue,a},e.singleQualifiedTypeName=function(t,a){return e.qualifiedEntityTypeName(t,a)||e.qualifiedComplexTypeName(t,a)||e.qualifiedTypeDefinitionName(t,a)||e.qualifiedEnumTypeName(t,a)||e.primitiveTypeName(t,a)},e.qualifiedTypeName=function(t,a){if(!r.default.equals(t,a,"Collection"))return e.singleQualifiedTypeName(t,a);var n=a;a+=10;var o=i.default.SQUOTE(t,a);if(o){a=o;var u=e.singleQualifiedTypeName(t,a);u&&(a=u.next,(o=i.default.SQUOTE(t,a))&&(a=o,u.position=n,u.next=a,u.raw=r.default.stringify(t,u.position,u.next),u.type=i.default.TokenType.Collection))}},e.qualifiedEntityTypeName=function(t,a,n){var o=a,u=e.namespace(t,a);if(u!==a&&46===t[u]){var l;"object"==typeof n&&(l=e.getMetadataRoot(n).schemas.filter(function(e){return e.namespace===r.default.stringify(t,o,u)})[0]);var f=e.entityTypeName(t,u+1,l);if(f)return f.value.namespace=r.default.stringify(t,o,u),i.default.tokenize(t,o,f.next,f,i.default.TokenType.QualifiedEntityTypeName)}},e.qualifiedComplexTypeName=function(t,a,n){var o=a,u=e.namespace(t,a);if(u!==a&&46===t[u]){var l;"object"==typeof n&&(l=e.getMetadataRoot(n).schemas.filter(function(e){return e.namespace===r.default.stringify(t,o,u)})[0]);var f=e.complexTypeName(t,u+1,l);if(f)return f.value.namespace=r.default.stringify(t,o,u),i.default.tokenize(t,o,f.next,f,i.default.TokenType.QualifiedComplexTypeName)}},e.qualifiedTypeDefinitionName=function(t,a){var n=a,r=e.namespace(t,a);if(r!==a&&46===t[r]){var o=e.typeDefinitionName(t,r+1);if(!o||o.next!==r+1)return i.default.tokenize(t,n,o.next,"TypeDefinitionName",i.default.TokenType.Identifier)}},e.qualifiedEnumTypeName=t,e.namespace=function(t,a){for(var n=e.namespacePart(t,a);n&&n.next>a;)if(a=n.next,46===t[n.next]&&(a++,(n=e.namespacePart(t,a))&&46!==t[n.next]))return a-1;return a-1},e.odataIdentifier=function(e,t,a){var n=t;if(i.default.identifierLeadingCharacter(e[t]))for(t++;t<e.length&&t-n<128&&i.default.identifierCharacter(e[t]);)t++;if(t>n)return i.default.tokenize(e,n,t,{name:r.default.stringify(e,n,t)},a||i.default.TokenType.ODataIdentifier)},e.namespacePart=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.NamespacePart)},e.entitySetName=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntitySetName);if(r){if("object"==typeof n){var o,u;if(n.dataServices.schemas.forEach(function(e){return e.entityContainer.forEach(function(e){return e.entitySets.filter(function(e){var t=e.name===r.raw;return t&&(o=e),t})})}),!o)return;if(n.dataServices.schemas.forEach(function(e){return 0===o.entityType.indexOf(e.namespace+".")&&e.entityTypes.filter(function(t){var a=t.name===o.entityType.replace(e.namespace+".","");return a&&(u=t),a})}),!u)return;r.metadata=u}return r}},e.singletonEntity=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.SingletonEntity)},e.entityTypeName=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntityTypeName);if(r){if("object"==typeof n){var o=n.entityTypes.filter(function(e){return e.name===r.raw})[0];if(!o)return;r.metadata=o}return r}},e.complexTypeName=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ComplexTypeName);if(r){if("object"==typeof n){var o=n.complexTypes.filter(function(e){return e.name===r.raw})[0];if(!o)return;r.metadata=o}return r}},e.typeDefinitionName=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.TypeDefinitionName)},e.enumerationTypeName=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.EnumerationTypeName)},e.enumerationMember=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.EnumerationMember)},e.termName=function(t,a){return e.odataIdentifier(t,a,i.default.TokenType.TermName)},e.primitiveTypeName=function(e,t){if(r.default.equals(e,t,"Edm.")){var a=t,n=(t+=4)+(r.default.equals(e,t,"Binary")||r.default.equals(e,t,"Boolean")||r.default.equals(e,t,"Byte")||r.default.equals(e,t,"Date")||r.default.equals(e,t,"DateTimeOffset")||r.default.equals(e,t,"Decimal")||r.default.equals(e,t,"Double")||r.default.equals(e,t,"Duration")||r.default.equals(e,t,"Guid")||r.default.equals(e,t,"Int16")||r.default.equals(e,t,"Int32")||r.default.equals(e,t,"Int64")||r.default.equals(e,t,"SByte")||r.default.equals(e,t,"Single")||r.default.equals(e,t,"Stream")||r.default.equals(e,t,"String")||r.default.equals(e,t,"TimeOfDay")||r.default.equals(e,t,"GeographyCollection")||r.default.equals(e,t,"GeographyLineString")||r.default.equals(e,t,"GeographyMultiLineString")||r.default.equals(e,t,"GeographyMultiPoint")||r.default.equals(e,t,"GeographyMultiPolygon")||r.default.equals(e,t,"GeographyPoint")||r.default.equals(e,t,"GeographyPolygon")||r.default.equals(e,t,"GeometryCollection")||r.default.equals(e,t,"GeometryLineString")||r.default.equals(e,t,"GeometryMultiLineString")||r.default.equals(e,t,"GeometryMultiPoint")||r.default.equals(e,t,"GeometryMultiPolygon")||r.default.equals(e,t,"GeometryPoint")||r.default.equals(e,t,"GeometryPolygon"));return n>t?i.default.tokenize(e,a,n,"PrimitiveTypeName",i.default.TokenType.Identifier):void 0}};var a=["Edm.Binary","Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Duration","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.Stream","Edm.String","Edm.TimeOfDay","Edm.GeographyCollection","Edm.GeographyLineString","Edm.GeographyMultiLineString","Edm.GeographyMultiPoint","Edm.GeographyMultiPolygon","Edm.GeographyPoint","Edm.GeographyPolygon","Edm.GeometryCollection","Edm.GeometryLineString","Edm.GeometryMultiLineString","Edm.GeometryMultiPoint","Edm.GeometryMultiPolygon","Edm.GeometryPoint","Edm.GeometryPolygon"];e.isPrimitiveTypeName=function(t,n){var r=e.getMetadataRoot(n),i=(r.schemas||r.dataServices&&r.dataServices.schemas||[]).filter(function(e){return 0===t.indexOf(e.namespace+".")})[0];return i?(i.enumTypes&&i.enumTypes.filter(function(e){return e.name===t.split(".").pop()})[0]||i.typeDefinitions&&i.typeDefinitions.filter(function(e){return e.name===t.split(".").pop()})[0])&&!(i.entityTypes&&i.entityTypes.filter(function(e){return e.name===t.split(".").pop()})[0]||i.complexTypes&&i.complexTypes.filter(function(e){return e.name===t.split(".").pop()})[0]):a.indexOf(t)>=0},e.getMetadataRoot=function(e){for(var t=e;t.parent;)t=t.parent;return t.dataServices||t},e.primitiveProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.properties[t];if(a.name===r.raw)return 0!==a.type.indexOf("Collection")&&e.isPrimitiveTypeName(a.type,n)?(r.metadata=a,n.key&&n.key.propertyRefs.filter(function(e){return e.name===a.name}).length>0&&(r.type=i.default.TokenType.PrimitiveKeyProperty),"break"):{value:void 0}},u=0;u<n.properties.length;u++){var l=o(u);if("object"==typeof l)return l.value;if("break"===l)break}if(!r.metadata)return}return r}},e.primitiveKeyProperty=function(t,a,n){var r=e.primitiveProperty(t,a,n);if(r&&r.type===i.default.TokenType.PrimitiveKeyProperty)return r},e.primitiveNonKeyProperty=function(t,a,n){var r=e.primitiveProperty(t,a,n);if(r&&r.type===i.default.TokenType.PrimitiveProperty)return r},e.primitiveColProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveCollectionProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.properties[t];if(a.name===r.raw)return-1!==a.type.indexOf("Collection")&&e.isPrimitiveTypeName(a.type.slice(11,-1),n)?(r.metadata=a,n.key.propertyRefs.filter(function(e){return e.name===a.name}).length>0&&(r.type=i.default.TokenType.PrimitiveKeyProperty),"break"):{value:void 0}},u=0;u<n.properties.length;u++){var l=o(u);if("object"==typeof l)return l.value;if("break"===l)break}if(!r.metadata)return}return r}},e.complexProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ComplexProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.properties[t];if(a.name===r.raw){if(0===a.type.indexOf("Collection")||e.isPrimitiveTypeName(a.type,n))return{value:void 0};var i=e.getMetadataRoot(n).schemas.filter(function(e){return 0===a.type.indexOf(e.namespace+".")})[0];if(!i)return{value:void 0};var o=i.complexTypes.filter(function(e){return e.name===a.type.split(".").pop()})[0];return o?(r.metadata=o,"break"):{value:void 0}}},u=0;u<n.properties.length;u++){var l=o(u);if("object"==typeof l)return l.value;if("break"===l)break}if(!r.metadata)return}return r}},e.complexColProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ComplexCollectionProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.properties[t];if(a.name===r.raw){if(-1===a.type.indexOf("Collection")||e.isPrimitiveTypeName(a.type.slice(11,-1),n))return{value:void 0};var i=e.getMetadataRoot(n).schemas.filter(function(e){return 0===a.type.slice(11,-1).indexOf(e.namespace+".")})[0];if(!i)return{value:void 0};var o=i.complexTypes.filter(function(e){return e.name===a.type.slice(11,-1).split(".").pop()})[0];return o?(r.metadata=o,"break"):{value:void 0}}},u=0;u<n.properties.length;u++){var l=o(u);if("object"==typeof l)return l.value;if("break"===l)break}if(!r.metadata)return}return r}},e.streamProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.StreamProperty);if(r){if("object"==typeof n){for(var o=0;o<n.properties.length;o++){var u=n.properties[o];if(u.name===r.raw){if("Edm.Stream"!==u.type)return;r.metadata=u;break}}if(!r.metadata)return}return r}},e.navigationProperty=function(t,a,n){return e.entityNavigationProperty(t,a,n)||e.entityColNavigationProperty(t,a,n)},e.entityNavigationProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntityNavigationProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.navigationProperties[t];if(a.name===r.raw&&-1===a.type.indexOf("Collection")&&!e.isPrimitiveTypeName(a.type.slice(11,-1),n)){var i=e.getMetadataRoot(n).schemas.filter(function(e){return 0===a.type.indexOf(e.namespace+".")})[0];if(!i)return{value:void 0};var o=i.entityTypes.filter(function(e){return e.name===a.type.split(".").pop()})[0];if(!o)return{value:void 0};r.metadata=o}},u=0;u<n.navigationProperties.length;u++){var l=o(u);if("object"==typeof l)return l.value}if(!r.metadata)return}return r}},e.entityColNavigationProperty=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntityCollectionNavigationProperty);if(r){if("object"==typeof n){for(var o=function(t){var a=n.navigationProperties[t];if(a.name===r.raw&&0===a.type.indexOf("Collection")&&!e.isPrimitiveTypeName(a.type.slice(11,-1),n)){var i=e.getMetadataRoot(n).schemas.filter(function(e){return 0===a.type.slice(11,-1).indexOf(e.namespace+".")})[0];if(!i)return{value:void 0};var o=i.entityTypes.filter(function(e){return e.name===a.type.slice(11,-1).split(".").pop()})[0];if(!o)return{value:void 0};r.metadata=o}},u=0;u<n.navigationProperties.length;u++){var l=o(u);if("object"==typeof l)return l.value}if(!r.metadata)return}return r}},e.action=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.Action);if(o){if("object"==typeof r&&!e.getOperationType("action",r,o,n,!1,!1,"entityTypes"))return;return o}},e.actionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ActionImport);if(r){if("object"==typeof n&&!e.getOperationImportType("action",n,r))return;return r}},e.odataFunction=function(t,a){return e.entityFunction(t,a)||e.entityColFunction(t,a)||e.complexFunction(t,a)||e.complexColFunction(t,a)||e.primitiveFunction(t,a)||e.primitiveColFunction(t,a)},e.getOperationType=function(t,a,n,r,i,o,u){var l,f=a.parent.namespace+"."+a.name;r&&(f="Collection("+f+")");for(var d=e.getMetadataRoot(a),p=0;p<d.schemas.length;p++){for(var c=d.schemas[p],s=0;s<c[t+"s"].length;s++){var y=c[t+"s"][s];if(y.name===n.raw&&y.isBound)for(var m=0;m<y.parameters.length;m++){var v=y.parameters[m];if("bindingParameter"===v.name&&v.type===f){l=y;break}}if(l)break}if(l)break}if(l){if("action"===t)return l;if(l.returnType.type.indexOf("Collection")!==i){var x=i?l.returnType.type.slice(11,-1):l.returnType.type;if((!e.isPrimitiveTypeName(x,a)||o)&&(e.isPrimitiveTypeName(x,a)||!o)){if(o)return x;var T;for(p=0;p<d.schemas.length;p++){if(c=d.schemas[p],0===x.indexOf(c.namespace+"."))for(s=0;s<c[u].length;s++){var E=c[u][s];if(c.namespace+"."+E.name===x){T=E;break}}if(T)break}return T}}}},e.entityFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.EntityFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!1,!1,"entityTypes");if(!u)return;o.metadata=u}return o}},e.entityColFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.EntityCollectionFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!0,!1,"entityTypes");if(!u)return;o.metadata=u}return o}},e.complexFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.ComplexFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!1,!1,"complexTypes");if(!u)return;o.metadata=u}return o}},e.complexColFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.ComplexCollectionFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!0,!1,"complexTypes");if(!u)return;o.metadata=u}return o}},e.primitiveFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!1,!0);if(!u)return;o.metadata=u}return o}},e.primitiveColFunction=function(t,a,n,r){var o=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveCollectionFunction);if(o){if("object"==typeof r){var u=e.getOperationType("function",r,o,n,!0,!0);if(!u)return;o.metadata=u}return o}},e.getOperationImportType=function(t,a,n,r,i,o){for(var u,l=0;l<a.dataServices.schemas.length;l++){for(var f=a.dataServices.schemas[l],d=0;d<f.entityContainer.length;d++){for(var p=f.entityContainer[d],c=0;c<p[t+"Imports"].length;c++)if((v=p[t+"Imports"][c]).name===n.raw){u=v;break}if(u)break}if(u)break}if(u){var s;for(l=0;l<a.dataServices.schemas.length;l++){if(f=a.dataServices.schemas[l],0===u[t].indexOf(f.namespace+"."))for(d=0;d<f[t+"s"].length;d++)if((v=f[t+"s"][d]).name===u.name){s=v;break}if(s)break}if(s){if("action"===t)return s;if(s.returnType.type.indexOf("Collection")!==r){var y=r?s.returnType.type.slice(11,-1):s.returnType.type;if((!e.isPrimitiveTypeName(y,a)||i)&&(e.isPrimitiveTypeName(y,a)||!i)){if(i)return y;var m;for(l=0;l<a.dataServices.schemas.length;l++){if(f=a.dataServices.schemas[l],0===y.indexOf(f.namespace+"."))for(d=0;d<f[o].length;d++){var v=f[o][d];if(f.namespace+"."+v.name===y){m=v;break}}if(m)break}return m}}}}},e.entityFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntityFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!1,!1,"entityTypes");if(!o)return;r.metadata=o}return r}},e.entityColFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.EntityCollectionFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!0,!1,"entityTypes");if(!o)return;r.metadata=o}return r}},e.complexFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ComplexFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!1,!1,"complexTypes");if(!o)return;r.metadata=o}return r}},e.complexColFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.ComplexCollectionFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!0,!1,"complexTypes");if(!o)return;r.metadata=o}return r}},e.primitiveFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!1,!0);if(!o)return;r.metadata=o}return r}},e.primitiveColFunctionImport=function(t,a,n){var r=e.odataIdentifier(t,a,i.default.TokenType.PrimitiveCollectionFunctionImport);if(r){if("object"==typeof n){var o=e.getOperationImportType("function",n,r,!0,!0);if(!o)return;r.metadata=o}return r}}}(n=t.NameOrIdentifier||(t.NameOrIdentifier={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(2),u=a(3),l=a(9);!function(e){function t(e,t){var a=o.default.primitiveLiteral(e,t)||Ge(e,t)||l.default.arrayOrObject(e,t)||Ve(e,t)||I(e,t)||fe(e,t)||Le(e,t)||le(e,t)||O(e,t)||ue(e,t);if(a){var n=T(e,a.next)||E(e,a.next)||k(e,a.next)||g(e,a.next)||P(e,a.next);return n&&(a.value={left:i.default.clone(a),right:n.value},a.next=n.value.next,a.type=n.type,a.raw=r.default.stringify(e,a.position,a.next)),a?i.default.tokenize(e,a.position,a.next,a,i.default.TokenType.CommonExpression):void 0}}function a(e,a){var o=oe(e,a)||S(e,a)||h(e,a)||t(e,a)||C(e,a);if(o){var u=void 0;o.type===i.default.TokenType.CommonExpression&&(u=p(e,o.next)||c(e,o.next)||s(e,o.next)||y(e,o.next)||m(e,o.next)||v(e,o.next)||x(e,o.next))&&(o.value={left:o.value,right:u.value},o.next=u.value.next,o.type=u.type,o.raw=r.default.stringify(e,o.position,o.next));var l=n(e,o.next)||f(e,o.next);if(l){var d=i.default.clone(o);o.next=l.value.next,o.value={left:d,right:l.value},o.type=l.type,o.raw=r.default.stringify(e,o.position,o.next),o.type===i.default.TokenType.AndExpression&&o.value.right.type===i.default.TokenType.OrExpression&&(o.value.left=i.default.tokenize(e,o.value.left.position,o.value.right.value.left.next,{left:o.value.left,right:o.value.right.value.left},o.type),o.type=o.value.right.type,o.value.right=o.value.right.value.right)}return o}}function n(e,t){var n=i.default.RWS(e,t);if(n!==t&&r.default.equals(e,n,"and")){var o=t;if(t=n+3,(n=i.default.RWS(e,t))!==t){var u=a(e,t=n);if(u)return i.default.tokenize(e,o,t,u,i.default.TokenType.AndExpression)}}}function f(e,t){var n=i.default.RWS(e,t);if(n!==t&&r.default.equals(e,n,"or")){var o=t;if(t=n+2,(n=i.default.RWS(e,t))!==t){var u=a(e,t=n);if(u)return i.default.tokenize(e,o,t,u,i.default.TokenType.OrExpression)}}}function d(e,a,n,o){var u=i.default.RWS(e,a);if(u!==a){var l=a;if(a=u,r.default.equals(e,a,n)&&(a+=n.length,(u=i.default.RWS(e,a))!==a)){var f=t(e,a=u);if(f)return i.default.tokenize(e,l,a,f.value,o)}}}function p(e,t){return d(e,t,"eq",i.default.TokenType.EqualsExpression)}function c(e,t){return d(e,t,"ne",i.default.TokenType.NotEqualsExpression)}function s(e,t){return d(e,t,"lt",i.default.TokenType.LesserThanExpression)}function y(e,t){return d(e,t,"le",i.default.TokenType.LesserOrEqualsExpression)}function m(e,t){return d(e,t,"gt",i.default.TokenType.GreaterThanExpression)}function v(e,t){return d(e,t,"ge",i.default.TokenType.GreaterOrEqualsExpression)}function x(e,t){return d(e,t,"has",i.default.TokenType.HasExpression)}function T(e,t){return d(e,t,"add",i.default.TokenType.AddExpression)}function E(e,t){return d(e,t,"sub",i.default.TokenType.SubExpression)}function k(e,t){return d(e,t,"mul",i.default.TokenType.MulExpression)}function g(e,t){return d(e,t,"div",i.default.TokenType.DivExpression)}function P(e,t){return d(e,t,"mod",i.default.TokenType.ModExpression)}function h(e,t){if(r.default.equals(e,t,"not")){var n=t;t+=3;var o=i.default.RWS(e,t);if(o!==t){var u=a(e,t=o);if(u)return i.default.tokenize(e,n,u.next,u,i.default.TokenType.NotExpression)}}}function C(e,t){var n=i.default.OPEN(e,t);if(n){var r=t;t=n;var o=a(e,t=i.default.BWS(e,t));if(o){t=i.default.BWS(e,o.next);var u=i.default.CLOSE(e,t);if(u)return t=u,i.default.tokenize(e,r,t,o,i.default.TokenType.BoolParenExpression)}}}function O(e,a){var n=i.default.OPEN(e,a);if(n){var r=a;a=n;var o=t(e,a=i.default.BWS(e,a));if(o){a=i.default.BWS(e,o.next);var u=i.default.CLOSE(e,a);if(u)return a=u,i.default.tokenize(e,r,a,o.value,i.default.TokenType.ParenExpression)}}}function S(e,t){return L(e,t)||q(e,t)||N(e,t)||ie(e,t)}function I(e,t){return M(e,t)||G(e,t)||D(e,t)||B(e,t)||z(e,t)||A(e,t)||V(e,t)||F(e,t)||U(e,t)||j(e,t)||Q(e,t)||W(e,t)||R(e,t)||w(e,t)||$(e,t)||K(e,t)||_(e,t)||H(e,t)||ee(e,t)||te(e,t)||ae(e,t)||ne(e,t)||re(e,t)||J(e,t)||X(e,t)||Y(e,t)||Z(e,t)}function b(e,a,n,o,u){if(void 0===o&&(o=0),void 0===u&&(u=o),r.default.equals(e,a,n)){var l=a;a+=n.length;var f=i.default.OPEN(e,a);if(f){var d;if(a=f,a=i.default.BWS(e,a),o>0)for(d=[];d.length<u;){var p=t(e,a);if(d.length<o&&!p)return;if(!p)break;d.push(p.value),a=p.next,a=i.default.BWS(e,a);var c=i.default.COMMA(e,a);if(d.length<o&&!c)return;if(!c)break;a=c,a=i.default.BWS(e,a)}a=i.default.BWS(e,a);var s=i.default.CLOSE(e,a);if(s)return a=s,i.default.tokenize(e,l,a,{method:n,parameters:d},i.default.TokenType.MethodCallExpression)}}}function N(e,t){return b(e,t,"contains",2)}function q(e,t){return b(e,t,"startswith",2)}function L(e,t){return b(e,t,"endswith",2)}function F(e,t){return b(e,t,"length",1)}function M(e,t){return b(e,t,"indexof",2)}function z(e,t){return b(e,t,"substring",2,3)}function A(e,t){return b(e,t,"substringof",2)}function G(e,t){return b(e,t,"tolower",1)}function D(e,t){return b(e,t,"toupper",1)}function B(e,t){return b(e,t,"trim",1)}function V(e,t){return b(e,t,"concat",2)}function U(e,t){return b(e,t,"year",1)}function j(e,t){return b(e,t,"month",1)}function Q(e,t){return b(e,t,"day",1)}function W(e,t){return b(e,t,"hour",1)}function R(e,t){return b(e,t,"minute",1)}function w(e,t){return b(e,t,"second",1)}function $(e,t){return b(e,t,"fractionalseconds",1)}function K(e,t){return b(e,t,"totalseconds",1)}function _(e,t){return b(e,t,"date",1)}function H(e,t){return b(e,t,"time",1)}function J(e,t){return b(e,t,"totaloffsetminutes",1)}function X(e,t){return b(e,t,"mindatetime",0)}function Y(e,t){return b(e,t,"maxdatetime",0)}function Z(e,t){return b(e,t,"now",0)}function ee(e,t){return b(e,t,"round",1)}function te(e,t){return b(e,t,"floor",1)}function ae(e,t){return b(e,t,"ceiling",1)}function ne(e,t){return b(e,t,"geo.distance",2)}function re(e,t){return b(e,t,"geo.length",1)}function ie(e,t){return b(e,t,"geo.intersects",2)}function oe(e,a){if(r.default.equals(e,a,"isof")){var n=a;a+=4;var o=i.default.OPEN(e,a);if(o){a=o;var l=t(e,a=i.default.BWS(e,a));if(l){a=l.next,a=i.default.BWS(e,a);var f=i.default.COMMA(e,a);if(!f)return;a=f,a=i.default.BWS(e,a)}var d=u.default.qualifiedTypeName(e,a);if(d){a=d.next,a=i.default.BWS(e,a);var p=i.default.CLOSE(e,a);if(p)return a=p,i.default.tokenize(e,n,a,{target:l,typename:d},i.default.TokenType.IsOfExpression)}}}}function ue(e,a){if(r.default.equals(e,a,"cast")){var n=a;a+=4;var o=i.default.OPEN(e,a);if(o){a=o;var l=t(e,a=i.default.BWS(e,a));if(l){a=l.next,a=i.default.BWS(e,a);var f=i.default.COMMA(e,a);if(!f)return;a=f,a=i.default.BWS(e,a)}var d=u.default.qualifiedTypeName(e,a);if(d){a=d.next,a=i.default.BWS(e,a);var p=i.default.CLOSE(e,a);if(p)return a=p,i.default.tokenize(e,n,a,{target:l,typename:d},i.default.TokenType.CastExpression)}}}}function le(e,a){if(45===e[a]){var n=a;a++;var r=t(e,a=i.default.BWS(e,a));if(r)return i.default.tokenize(e,n,r.next,r,i.default.TokenType.NegateExpression)}}function fe(e,t){var a,n=ce(e,t),r=t;if(n){if(47===e[n.next]){if(!(a=de(e,t=n.next+1)))return;return i.default.tokenize(e,r,a.next,[n,a],i.default.TokenType.FirstMemberExpression)}}else a=de(e,t);if(n=n||a)return i.default.tokenize(e,r,n.next,n,i.default.TokenType.FirstMemberExpression)}function de(e,t){var a=t,n=u.default.qualifiedEntityTypeName(e,t);if(n){if(47!==e[n.next])return;t=n.next+1}var r=pe(e,t)||Fe(e,t);if(r)return i.default.tokenize(e,a,r.next,n?{name:n,value:r}:r,i.default.TokenType.MemberExpression)}function pe(e,t){var a=u.default.odataIdentifier(e,t),n=t;if(a){t=a.next;var r=be(e,a.next)||ke(e,a.next)||Ie(e,a.next)||Ne(e,a.next)||qe(e,a.next);r&&(t=r.next,a={current:i.default.clone(a),next:r})}else a||(a=u.default.streamProperty(e,t))&&(t=a.next);if(a)return i.default.tokenize(e,n,t,a,i.default.TokenType.PropertyPathExpression)}function ce(e,t){return se(e,t)||(ye?ve(e,t):void 0)}function se(e,t){if(r.default.equals(e,t,"$it"))return i.default.tokenize(e,t,t+3,"$it",i.default.TokenType.ImplicitVariableExpression)}e.commonExpr=t,e.boolCommonExpr=a,e.andExpr=n,e.orExpr=f,e.leftRightExpr=d,e.eqExpr=p,e.neExpr=c,e.ltExpr=s,e.leExpr=y,e.gtExpr=m,e.geExpr=v,e.hasExpr=x,e.addExpr=T,e.subExpr=E,e.mulExpr=k,e.divExpr=g,e.modExpr=P,e.notExpr=h,e.boolParenExpr=C,e.parenExpr=O,e.boolMethodCallExpr=S,e.methodCallExpr=I,e.methodCallExprFactory=b,e.containsMethodCallExpr=N,e.startsWithMethodCallExpr=q,e.endsWithMethodCallExpr=L,e.lengthMethodCallExpr=F,e.indexOfMethodCallExpr=M,e.substringMethodCallExpr=z,e.substringOfMethodCallExpr=A,e.toLowerMethodCallExpr=G,e.toUpperMethodCallExpr=D,e.trimMethodCallExpr=B,e.concatMethodCallExpr=V,e.yearMethodCallExpr=U,e.monthMethodCallExpr=j,e.dayMethodCallExpr=Q,e.hourMethodCallExpr=W,e.minuteMethodCallExpr=R,e.secondMethodCallExpr=w,e.fractionalsecondsMethodCallExpr=$,e.totalsecondsMethodCallExpr=K,e.dateMethodCallExpr=_,e.timeMethodCallExpr=H,e.totalOffsetMinutesMethodCallExpr=J,e.minDateTimeMethodCallExpr=X,e.maxDateTimeMethodCallExpr=Y,e.nowMethodCallExpr=Z,e.roundMethodCallExpr=ee,e.floorMethodCallExpr=te,e.ceilingMethodCallExpr=ae,e.distanceMethodCallExpr=ne,e.geoLengthMethodCallExpr=re,e.intersectsMethodCallExpr=ie,e.isofExpr=oe,e.castExpr=ue,e.negateExpr=le,e.firstMemberExpr=fe,e.memberExpr=de,e.propertyPathExpr=pe,e.inscopeVariableExpr=ce,e.implicitVariableExpr=se;var ye=!1,me=!1;function ve(e,t){var a=u.default.odataIdentifier(e,t,i.default.TokenType.LambdaVariableExpression);if(a)return me=!0,a}function xe(e,t){ye=!0;var n=a(e,t);if(ye=!1,n&&me)return me=!1,i.default.tokenize(e,n.position,n.next,n,i.default.TokenType.LambdaPredicateExpression)}function Te(e,t){if(r.default.equals(e,t,"any")){var a=t;t+=3;var n=i.default.OPEN(e,t);if(n){t=n;var o,u=ve(e,t=i.default.BWS(e,t));if(u){t=u.next,t=i.default.BWS(e,t);var l=i.default.COLON(e,t);if(!l)return;if(t=l,!(o=xe(e,t=i.default.BWS(e,t))))return;t=o.next}t=i.default.BWS(e,t);var f=i.default.CLOSE(e,t);if(f)return t=f,i.default.tokenize(e,a,t,{variable:u,predicate:o},i.default.TokenType.AnyExpression)}}}function Ee(e,t){if(r.default.equals(e,t,"all")){var a=t;t+=3;var n=i.default.OPEN(e,t);if(n){t=n;var o=ve(e,t=i.default.BWS(e,t));if(o){t=o.next,t=i.default.BWS(e,t);var u=i.default.COLON(e,t);if(u){t=u;var l=xe(e,t=i.default.BWS(e,t));if(l){t=l.next,t=i.default.BWS(e,t);var f=i.default.CLOSE(e,t);if(f)return t=f,i.default.tokenize(e,a,t,{variable:o,predicate:l},i.default.TokenType.AllExpression)}}}}}}function ke(e,t){var a,n,r,o,l=t;if(47===e[t]){if(t++,!(a=u.default.qualifiedEntityTypeName(e,t)))return;t=a.next}if((n=ge(e,t))?(r=Ie(e,t=n.next))&&(t=r.next):(o=be(e,t))&&(t=o.next),t>l)return i.default.tokenize(e,l,t,{entity:a,predicate:n,navigation:r,path:o},i.default.TokenType.CollectionNavigationExpression)}function ge(e,t,a){return Pe(e,t,a)||he(e,t)}function Pe(e,t,a){var n=i.default.OPEN(e,t);if(n){var r=t,o=Oe(e,t=n);if(o){var u,l=i.default.CLOSE(e,o.next);if(l)return"object"==typeof a&&a.key&&a.key.propertyRefs&&a.key.propertyRefs[0]&&a.key.propertyRefs[0].name&&(u=a.key.propertyRefs[0].name),i.default.tokenize(e,r,l,{key:u,value:o},i.default.TokenType.SimpleKey)}}}function he(e,t){var a=i.default.OPEN(e,t);if(a){var n=t,r=Ce(e,t=a);if(r){for(var o=[];r;){o.push(r);var u=i.default.COMMA(e,r.next);r=u?Ce(e,u):null}t=o[o.length-1].next;var l=i.default.CLOSE(e,t);if(l)return t=l,i.default.tokenize(e,n,t,o,i.default.TokenType.CompoundKey)}}}function Ce(e,t){var a=u.default.primitiveKeyProperty(e,t)||Se(e,t);if(a){var n=i.default.EQ(e,a.next);if(n){var r=Oe(e,n);return r?i.default.tokenize(e,t,r.next,{key:a,value:r},i.default.TokenType.KeyValuePair):void 0}}}function Oe(e,t){var a=o.default.primitiveLiteral(e,t);if(a)return a.type=i.default.TokenType.KeyPropertyValue,a}function Se(e,t){return u.default.odataIdentifier(e,t,i.default.TokenType.KeyPropertyAlias)}function Ie(e,t){if(47===e[t]){var a=de(e,t+1);return a?i.default.tokenize(e,t,a.next,a,i.default.TokenType.SingleNavigationExpression):void 0}}function be(e,t){var a=Be(e,t);if(a||47===e[t]&&(a=Fe(e,t+1)||Te(e,t+1)||Ee(e,t+1)),a)return i.default.tokenize(e,t,a.next,a,i.default.TokenType.CollectionPathExpression)}function Ne(e,t){if(47===e[t]){var a=t;t++;var n=u.default.qualifiedComplexTypeName(e,t);if(n){if(47!==e[n.next])return;t=n.next+1}var r=pe(e,t)||Fe(e,t);return r?i.default.tokenize(e,a,r.next,n?[n,r]:[r],i.default.TokenType.ComplexPathExpression):void 0}}function qe(e,t){if(47===e[t]){var a=Fe(e,t+1);return a?i.default.tokenize(e,t,a.next,a,i.default.TokenType.SinglePathExpression):void 0}}function Le(e,t){var a=u.default.namespace(e,t);if(a!==t&&46===e[a]){var n=t;t=a+1;var o=u.default.odataIdentifier(e,t);if(o){o.position=n,o.value.namespace=r.default.stringify(e,n,a),o.raw=r.default.stringify(e,n,o.next);var l=Me(e,t=o.next);if(l){var f=be(e,t=l.next)||ke(e,t)||Ie(e,t)||Ne(e,t)||qe(e,t);return f&&(t=f.next),i.default.tokenize(e,n,t,{fn:o,params:l,expression:f},i.default.TokenType.FunctionExpression)}}}}function Fe(e,t){return Le(e,t)}function Me(e,t){var a=i.default.OPEN(e,t);if(a){for(var n=t,r=[],o=ze(e,t=a);o;){r.push(o);var u=i.default.COMMA(e,o.next);if(u){if(!(o=ze(e,t=u)))return}else t=o.next,o=null}var l=i.default.CLOSE(e,t);if(l)return t=l,i.default.tokenize(e,n,t,r,i.default.TokenType.FunctionExpressionParameters)}}function ze(e,t){var a=Ae(e,t);if(a){var n=i.default.EQ(e,a.next);if(a&&n){var r=t,o=Ge(e,t=n)||De(e,t);if(o)return i.default.tokenize(e,r,o.next,{name:a,value:o},i.default.TokenType.FunctionExpressionParameter)}}}function Ae(e,t){return u.default.odataIdentifier(e,t,i.default.TokenType.ParameterName)}function Ge(e,t){var a=i.default.AT(e,t);if(a){var n=u.default.odataIdentifier(e,a);return n?i.default.tokenize(e,t,n.next,n.value,i.default.TokenType.ParameterAlias):void 0}}function De(e,a){var n=l.default.arrayOrObject(e,a)||t(e,a);if(n)return i.default.tokenize(e,a,n.next,n.value,i.default.TokenType.ParameterValue)}function Be(e,t){if(r.default.equals(e,t,"/$count"))return i.default.tokenize(e,t,t+7,"/$count",i.default.TokenType.CountExpression)}function Ve(e,t){if(r.default.equals(e,t,"$root/")){var a=t;t+=6;var n,o,l,f=u.default.entitySetName(e,t);if(f&&(n=ge(e,f.next)),f&&n)l={entitySet:f,keys:n};else{if(!(o=u.default.singletonEntity(e,t)))return;l={entity:o}}var d=Ie(e,t=(n||o).next);return d&&(t=d.next),i.default.tokenize(e,a,t,{current:l,next:d},i.default.TokenType.RootExpression)}}e.lambdaVariableExpr=ve,e.lambdaPredicateExpr=xe,e.anyExpr=Te,e.allExpr=Ee,e.collectionNavigationExpr=ke,e.keyPredicate=ge,e.simpleKey=Pe,e.compoundKey=he,e.keyValuePair=Ce,e.keyPropertyValue=Oe,e.keyPropertyAlias=Se,e.singleNavigationExpr=Ie,e.collectionPathExpr=be,e.complexPathExpr=Ne,e.singlePathExpr=qe,e.functionExpr=Le,e.boundFunctionExpr=Fe,e.functionExprParameters=Me,e.functionExprParameter=ze,e.parameterName=Ae,e.parameterAlias=Ge,e.parameterValue=De,e.countExpr=Be,e.refExpr=function(e,t){if(r.default.equals(e,t,"/$ref"))return i.default.tokenize(e,t,t+5,"/$ref",i.default.TokenType.RefExpression)},e.valueExpr=function(e,t){if(r.default.equals(e,t,"/$value"))return i.default.tokenize(e,t,t+7,"/$value",i.default.TokenType.ValueExpression)},e.rootExpr=Ve}(n=t.Expressions||(t.Expressions={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(2),u=a(3),l=a(4);!function(e){e.queryOptions=function(t,a,n){var r=e.queryOption(t,a,n);if(r){var o=a;a=r.next;for(var u=[];r&&(u.push(r),38===t[a]);){if(a++,!(r=e.queryOption(t,a,n)))return;a=r.next}return i.default.tokenize(t,o,a,{options:u},i.default.TokenType.QueryOptions)}},e.queryOption=function(t,a,n){return e.systemQueryOption(t,a,n)||e.aliasAndValue(t,a)||e.customQueryOption(t,a)},e.systemQueryOption=function(t,a,n){return e.expand(t,a,n)||e.filter(t,a)||e.format(t,a)||e.id(t,a)||e.inlinecount(t,a)||e.orderby(t,a)||e.search(t,a)||e.select(t,a)||e.skip(t,a)||e.skiptoken(t,a)||e.top(t,a)},e.customQueryOption=function(e,t){var a=u.default.odataIdentifier(e,t);if(a){var n=t;t=a.next;var o=i.default.EQ(e,t);if(o){for(t=o;38!==e[t]&&t<e.length;)t++;if(t!==o)return i.default.tokenize(e,n,t,{key:a.raw,value:r.default.stringify(e,o,t)},i.default.TokenType.CustomQueryOption)}}},e.id=function(e,t){var a=t;if(r.default.equals(e,t,"%24id"))t+=5;else{if(!r.default.equals(e,t,"$id"))return;t+=3}var n=i.default.EQ(e,t);if(n){for(t=n;38!==e[t]&&t<e.length;)t++;if(t!==n)return i.default.tokenize(e,a,t,r.default.stringify(e,n,t),i.default.TokenType.Id)}},e.expand=function(t,a,n){var o=a;if(r.default.equals(t,a,"%24expand"))a+=9;else{if(!r.default.equals(t,a,"$expand"))return;a+=7}var u=i.default.EQ(t,a);if(u){a=u;var l=[],f=e.expandItem(t,a,n);if(f){for(a=f.next;f;){l.push(f);var d=i.default.COMMA(t,a);if(!d)break;if(a=d,!(f=e.expandItem(t,a,n)))return;a=f.next}return i.default.tokenize(t,o,a,{items:l},i.default.TokenType.Expand)}}},e.expandItem=function(t,a,n){var r=a,o=i.default.STAR(t,a);if(o){a=o;var u=l.default.refExpr(t,a);if(u)return a=u.next,i.default.tokenize(t,r,a,{path:"*",ref:u},i.default.TokenType.ExpandItem);var f=i.default.OPEN(t,a);if(f){a=f;var d=e.levels(t,a);if(!d)return;a=d.next;var p=i.default.CLOSE(t,a);if(!p)return;return a=p,i.default.tokenize(t,r,a,{path:"*",levels:d},i.default.TokenType.ExpandItem)}}var c=e.expandPath(t,a,n);if(c){a=c.next;var s={path:c},y=l.default.refExpr(t,a);if(y){a=y.next,s.ref=y;var m=i.default.OPEN(t,a);if(m){if(a=m,!(h=e.expandRefOption(t,a)))return;for(var v=[];h&&(v.push(h),a=h.next,O=i.default.SEMI(t,a));)if(a=O,!(h=e.expandRefOption(t,a)))return;var x=i.default.CLOSE(t,a);if(!x)return;a=x,s.options=v}}else{var T=l.default.countExpr(t,a);if(T){a=T.next,s.count=T;var E=i.default.OPEN(t,a);if(E){if(a=E,!(h=e.expandCountOption(t,a)))return;for(var k=[];h&&(k.push(h),a=h.next,O=i.default.SEMI(t,a));)if(a=O,!(h=e.expandCountOption(t,a)))return;var g=i.default.CLOSE(t,a);if(!g)return;a=g,s.options=k}}else{var P=i.default.OPEN(t,a);if(P){var h;if(a=P,!(h=e.expandOption(t,a)))return;for(var C=[];h;){var O;if(C.push(h),a=h.next,!(O=i.default.SEMI(t,a)))break;if(a=O,!(h=e.expandOption(t,a)))return}var S=i.default.CLOSE(t,a);if(!S)return;a=S,s.options=C}}}return i.default.tokenize(t,r,a,s,i.default.TokenType.ExpandItem)}},e.expandCountOption=function(t,a){return e.filter(t,a)||e.search(t,a)},e.expandRefOption=function(t,a){return e.expandCountOption(t,a)||e.orderby(t,a)||e.skip(t,a)||e.top(t,a)||e.inlinecount(t,a)},e.expandOption=function(t,a){return e.expandRefOption(t,a)||e.select(t,a)||e.expand(t,a)||e.levels(t,a)},e.expandPath=function(e,t,a){var n=t,r=[],o=u.default.qualifiedEntityTypeName(e,t,a)||u.default.qualifiedComplexTypeName(e,t,a);if(o){if(t=o.next,r.push(o),47!==e[t])return;t++,a=o.value.metadata,delete o.value.metadata}for(var l=u.default.complexProperty(e,t,a)||u.default.complexColProperty(e,t,a);l&&47===e[l.next];){t=l.next+1,r.push(l);var f=u.default.qualifiedComplexTypeName(e,t,a);f&&(47===e[f.next]&&(t=f.next+1,r.push(f)),a=f.value.metadata,delete f.value.metadata),l=u.default.complexProperty(e,t,a)||u.default.complexColProperty(e,t,a)}var d=u.default.navigationProperty(e,t,a);if(d){if(t=d.next,r.push(d),a=d.metadata,delete d.metadata,47===e[t]){var p=u.default.qualifiedEntityTypeName(e,t+1,a);p&&(t=p.next,r.push(p),a=p.value.metadata,delete p.value.metadata)}return i.default.tokenize(e,n,t,r,i.default.TokenType.ExpandPath)}},e.search=function(t,a){var n=a;if(r.default.equals(t,a,"%24search"))a+=9;else{if(!r.default.equals(t,a,"$search"))return;a+=7}var o=i.default.EQ(t,a);if(o){a=o;var u=e.searchExpr(t,a);if(u)return a=u.next,i.default.tokenize(t,n,a,u,i.default.TokenType.Search)}},e.searchExpr=function(t,a){var n=e.searchParenExpr(t,a)||e.searchTerm(t,a);if(n){a=n.next;var o=e.searchAndExpr(t,a)||e.searchOrExpr(t,a);if(o){var u=i.default.clone(n);n.next=o.value.next,n.value={left:u,right:o.value},n.type=o.type,n.raw=r.default.stringify(t,n.position,n.next),n.type===i.default.TokenType.SearchAndExpression&&n.value.right.type===i.default.TokenType.SearchOrExpression&&(n.value.left=i.default.tokenize(t,n.value.left.position,n.value.right.value.left.next,{left:n.value.left,right:n.value.right.value.left},n.type),n.type=n.value.right.type,n.value.right=n.value.right.value.right)}return n}},e.searchTerm=function(t,a){return e.searchNotExpr(t,a)||e.searchPhrase(t,a)||e.searchWord(t,a)},e.searchNotExpr=function(t,a){var n=i.default.RWS(t,a);if(r.default.equals(t,n,"NOT")){var o=a;if(a=n+3,(n=i.default.RWS(t,a))!==a){a=n;var u=e.searchPhrase(t,a)||e.searchWord(t,a);if(u)return a=u.next,i.default.tokenize(t,o,a,u,i.default.TokenType.SearchNotExpression)}}},e.searchOrExpr=function(t,a){var n=i.default.RWS(t,a);if(n!==a&&r.default.equals(t,n,"OR")){var o=a;if(a=n+2,(n=i.default.RWS(t,a))!==a){a=n;var u=e.searchExpr(t,a);if(u)return a=u.next,i.default.tokenize(t,o,a,u,i.default.TokenType.SearchOrExpression)}}},e.searchAndExpr=function(t,a){var n=i.default.RWS(t,a);if(n!==a&&r.default.equals(t,n,"AND")){var o=a;if(a=n+3,(n=i.default.RWS(t,a))!==a){a=n;var u=e.searchExpr(t,a);if(u)return a=u.next,i.default.tokenize(t,o,a,u,i.default.TokenType.SearchAndExpression)}}},e.searchPhrase=function(e,t){var a=i.default.quotationMark(e,t);if(a!==t){for(var n=t,o=t=a,u=i.default.qcharNoAMPDQUOTE(e,t);u>t&&!i.default.OPEN(e,t)&&!i.default.CLOSE(e,t);)t=u,u=i.default.qcharNoAMPDQUOTE(e,t);var l=t;if(a=i.default.quotationMark(e,t))return t=a,i.default.tokenize(e,n,t,r.default.stringify(e,o,l),i.default.TokenType.SearchPhrase)}},e.searchWord=function(e,t){var a=r.default.required(e,t,i.default.ALPHA,1);if(a){var n=t;t=a;var o=i.default.tokenize(e,n,t,null,i.default.TokenType.SearchWord);return o.value=o.raw,o}},e.searchParenExpr=function(t,a){var n=i.default.OPEN(t,a);if(n){var r=a;a=n,a=i.default.BWS(t,a);var o=e.searchExpr(t,a);if(o){a=o.next,a=i.default.BWS(t,a);var u=i.default.CLOSE(t,a);if(u)return a=u,i.default.tokenize(t,r,a,o,i.default.TokenType.SearchParenExpression)}}},e.levels=function(e,t){var a=t;if(r.default.equals(e,t,"%24levels"))t+=9;else{if(!r.default.equals(e,t,"$levels"))return;t+=7}var n=i.default.EQ(e,t);if(n){var u;if(t=n,r.default.equals(e,t,"max"))u="max",t+=3;else{var l=o.default.int32Value(e,t);if(!l)return;u=l.raw,t=l.next}return i.default.tokenize(e,a,t,u,i.default.TokenType.Levels)}},e.filter=function(e,t){var a=t;if(r.default.equals(e,t,"%24filter"))t+=9;else{if(!r.default.equals(e,t,"$filter"))return;t+=7}var n=i.default.EQ(e,t);if(n){t=n;var o=l.default.boolCommonExpr(e,t);if(o)return t=o.next,i.default.tokenize(e,a,t,o,i.default.TokenType.Filter)}},e.orderby=function(t,a){var n=a;if(r.default.equals(t,a,"%24orderby"))a+=10;else{if(!r.default.equals(t,a,"$orderby"))return;a+=8}var o=i.default.EQ(t,a);if(o){a=o;var u=[],l=e.orderbyItem(t,a);if(l){for(a=l.next;l;){u.push(l);var f=i.default.COMMA(t,a);if(!f)break;if(a=f,!(l=e.orderbyItem(t,a)))return;a=l.next}return i.default.tokenize(t,n,a,{items:u},i.default.TokenType.OrderBy)}}},e.orderbyItem=function(e,t){var a=l.default.commonExpr(e,t);if(a){var n=t;t=a.next;var o=1,u=i.default.RWS(e,t);if(u>t)if(t=u,r.default.equals(e,t,"asc"))t+=3;else{if(!r.default.equals(e,t,"desc"))return;t+=4,o=-1}return i.default.tokenize(e,n,t,{expr:a,direction:o},i.default.TokenType.OrderByItem)}},e.skip=function(e,t){var a=t;if(r.default.equals(e,t,"%24skip"))t+=7;else{if(!r.default.equals(e,t,"$skip"))return;t+=5}var n=i.default.EQ(e,t);if(n){t=n;var u=o.default.int32Value(e,t);if(u)return t=u.next,i.default.tokenize(e,a,t,u,i.default.TokenType.Skip)}},e.top=function(e,t){var a=t;if(r.default.equals(e,t,"%24top"))t+=6;else{if(!r.default.equals(e,t,"$top"))return;t+=4}var n=i.default.EQ(e,t);if(n){t=n;var u=o.default.int32Value(e,t);if(u)return t=u.next,i.default.tokenize(e,a,t,u,i.default.TokenType.Top)}},e.format=function(e,t){var a=t;if(r.default.equals(e,t,"%24format"))t+=9;else{if(!r.default.equals(e,t,"$format"))return;t+=7}var n,o=i.default.EQ(e,t);if(o)return t=o,r.default.equals(e,t,"atom")?(n="atom",t+=4):r.default.equals(e,t,"json")?(n="json",t+=4):r.default.equals(e,t,"xml")&&(n="xml",t+=3),n?i.default.tokenize(e,a,t,{format:n},i.default.TokenType.Format):void 0},e.inlinecount=function(e,t){var a=t;if(r.default.equals(e,t,"%24count"))t+=8;else{if(!r.default.equals(e,t,"$count"))return;t+=6}var n=i.default.EQ(e,t);if(n){t=n;var u=o.default.booleanValue(e,t);if(u)return t=u.next,i.default.tokenize(e,a,t,u,i.default.TokenType.InlineCount)}},e.select=function(t,a){var n=a;if(r.default.equals(t,a,"%24select"))a+=9;else{if(!r.default.equals(t,a,"$select"))return;a+=7}var o=i.default.EQ(t,a);if(o){a=o;var u=[],l=e.selectItem(t,a);if(l){for(;l;){u.push(l),a=l.next;var f=i.default.COMMA(t,a);if(!f)break;if(a=f,!(l=e.selectItem(t,a)))return}return i.default.tokenize(t,n,a,{items:u},i.default.TokenType.Select)}}},e.selectItem=function(t,a){var n,o=a,l=e.allOperationsInSchema(t,a),f=i.default.STAR(t,a);if(l>a)n={namespace:r.default.stringify(t,a,l-2),value:"*"},a=l;else if(f)n={value:"*"},a=f;else{n={};var d=u.default.qualifiedEntityTypeName(t,a)||u.default.qualifiedComplexTypeName(t,a);if(d&&47!==t[d.next])return;d&&47===t[d.next]&&(a++,n.name=d);var p=e.selectProperty(t,a)||e.qualifiedActionName(t,a)||e.qualifiedFunctionName(t,a);if(!p)return;a=p.next,n=d?{name:d,select:p}:p}if(a>o)return i.default.tokenize(t,o,a,n,i.default.TokenType.SelectItem)},e.allOperationsInSchema=function(e,t){var a=u.default.namespace(e,t),n=i.default.STAR(e,a+1);return a>t&&46===e[a]&&n?n:t},e.selectProperty=function(t,a){var n=e.selectPath(t,a)||u.default.primitiveProperty(t,a)||u.default.primitiveColProperty(t,a)||u.default.navigationProperty(t,a);if(n){var o=a;if(a=n.next,n.type===i.default.TokenType.SelectPath&&47===t[a]){a++;var l=e.selectProperty(t,a);if(!l)return;var f=i.default.clone(n);n.next=l.next,n.raw=r.default.stringify(t,o,n.next),n.value={path:f,next:l}}return n}},e.selectPath=function(e,t){var a=u.default.complexProperty(e,t)||u.default.complexColProperty(e,t);if(a){var n=t,r=a;if(47===e[t=a.next]){var o=u.default.qualifiedComplexTypeName(e,t+1);o&&(t=o.next,r={prop:a,name:o})}return i.default.tokenize(e,n,t,r,i.default.TokenType.SelectPath)}},e.qualifiedActionName=function(e,t){var a=u.default.namespace(e,t);if(a!==t&&46===e[a]){var n=t;t=a+1;var o=u.default.action(e,t);if(o)return o.value.namespace=r.default.stringify(e,n,a),i.default.tokenize(e,n,o.next,o,i.default.TokenType.Action)}},e.qualifiedFunctionName=function(e,t){var a=u.default.namespace(e,t);if(a!==t&&46===e[a]){var n=t;t=a+1;var o=u.default.odataFunction(e,t);if(o){o.value.namespace=r.default.stringify(e,n,a),t=o.next;var f={name:o},d=i.default.OPEN(e,t);if(d){t=d,f.parameters=[];var p=l.default.parameterName(e,t);if(!p)return;for(;p;){t=p.next,f.parameters.push(p);var c=i.default.COMMA(e,t);if(!c)break;if(t=c,!l.default.parameterName(e,t))return}var s=i.default.CLOSE(e,t);if(!s)return;t=s}return i.default.tokenize(e,n,t,f,i.default.TokenType.Function)}}},e.skiptoken=function(e,t){var a=t;if(r.default.equals(e,t,"%24skiptoken"))t+=12;else{if(!r.default.equals(e,t,"$skiptoken"))return;t+=10}var n=i.default.EQ(e,t);if(n){t=n;var o=i.default.qcharNoAMP(e,t);if(o){for(var u=t;o>t;)t=o,o=i.default.qcharNoAMP(e,t);return i.default.tokenize(e,a,t,r.default.stringify(e,u,t),i.default.TokenType.SkipToken)}}},e.aliasAndValue=function(e,t){var a=l.default.parameterAlias(e,t);if(a){var n=t;t=a.next;var r=i.default.EQ(e,t);if(r){t=r;var o=l.default.parameterValue(e,t);if(o)return t=o.next,i.default.tokenize(e,n,t,{alias:a,value:o},i.default.TokenType.AliasAndValue)}}}}(n=t.Query||(t.Query={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(2),u=a(3),l=a(4);!function(e){e.resourcePath=function(t,a,n){47===t[a]&&a++;var r=e.batch(t,a)||e.entity(t,a,n)||e.metadata(t,a);if(r)return r;var o=u.default.entitySetName(t,a,n)||e.functionImportCall(t,a,n)||e.crossjoin(t,a)||e.all(t,a)||e.actionImportCall(t,a,n)||u.default.singletonEntity(t,a);if(o){var l,f=a;switch(a=o.next,o.type){case i.default.TokenType.EntitySetName:l=e.collectionNavigation(t,o.next,o.metadata),n=o.metadata,delete o.metadata;break;case i.default.TokenType.EntityCollectionFunctionImportCall:l=e.collectionNavigation(t,o.next,o.value.import.metadata),n=o.value.import.metadata,delete o.value.import.metadata;break;case i.default.TokenType.SingletonEntity:l=e.singleNavigation(t,o.next,o.metadata),n=o.metadata,delete o.metadata;break;case i.default.TokenType.EntityFunctionImportCall:l=e.singleNavigation(t,o.next,o.value.import.metadata),n=o.value.import.metadata,delete o.value.import.metadata;break;case i.default.TokenType.ComplexCollectionFunctionImportCall:case i.default.TokenType.PrimitiveCollectionFunctionImportCall:l=e.collectionPath(t,o.next,o.value.import.metadata),n=o.value.import.metadata,delete o.value.import.metadata;break;case i.default.TokenType.ComplexFunctionImportCall:l=e.complexPath(t,o.next,o.value.import.metadata),n=o.value.import.metadata,delete o.value.import.metadata;break;case i.default.TokenType.PrimitiveFunctionImportCall:l=e.singlePath(t,o.next,o.value.import.metadata),n=o.value.import.metadata,delete o.value.import.metadata}return l&&(a=l.next),47===t[a]&&a++,o?i.default.tokenize(t,f,a,{resource:o,navigation:l},i.default.TokenType.ResourcePath,l||{metadata:n}):void 0}},e.batch=function(e,t){if(r.default.equals(e,t,"$batch"))return i.default.tokenize(e,t,t+6,"$batch",i.default.TokenType.Batch)},e.entity=function(e,t,a){if(r.default.equals(e,t,"$entity")){var n,o=t;if(47===e[t+=7]){if(!(n=u.default.qualifiedEntityTypeName(e,t+1,a)))return;t=n.next}return i.default.tokenize(e,o,t,n||"$entity",i.default.TokenType.Entity)}},e.metadata=function(e,t){if(r.default.equals(e,t,"$metadata"))return i.default.tokenize(e,t,t+9,"$metadata",i.default.TokenType.Metadata)},e.collectionNavigation=function(t,a,n){var r,o=a;47===t[a]&&(r=u.default.qualifiedEntityTypeName(t,a+1,n))&&(a=r.next,n=r.value.metadata,delete r.value.metadata);var l=e.collectionNavigationPath(t,a,n);if(l&&(a=l.next),r||l)return i.default.tokenize(t,o,a,{name:r,path:l},i.default.TokenType.CollectionNavigation,l||r)},e.collectionNavigationPath=function(t,a,n){var r=a,o=e.collectionPath(t,a,n)||l.default.refExpr(t,a);if(o)return o;var u=l.default.keyPredicate(t,a,n);if(u){var f={predicate:u};a=u.next;var d=e.singleNavigation(t,a,n);return d&&(f={predicate:u,navigation:d},a=d.next),i.default.tokenize(t,r,a,f,i.default.TokenType.CollectionNavigationPath,d||{metadata:n})}},e.singleNavigation=function(t,a,n){var r=e.boundOperation(t,a,!1,n)||l.default.refExpr(t,a)||l.default.valueExpr(t,a);if(r)return r;var o,f=a;return 47===t[a]&&(o=u.default.qualifiedEntityTypeName(t,a+1,n))&&(a=o.next,n=o.value.metadata,delete o.value.metadata),47===t[a]&&(r=e.propertyPath(t,a+1,n))&&(a=r.next),o||r?i.default.tokenize(t,f,a,{name:o,path:r},i.default.TokenType.SingleNavigation,r):void 0},e.propertyPath=function(t,a,n){var r=u.default.entityColNavigationProperty(t,a,n)||u.default.entityNavigationProperty(t,a,n)||u.default.complexColProperty(t,a,n)||u.default.complexProperty(t,a,n)||u.default.primitiveColProperty(t,a,n)||u.default.primitiveProperty(t,a,n)||u.default.streamProperty(t,a,n);if(r){var o,l=a;switch(a=r.next,r.type){case i.default.TokenType.EntityCollectionNavigationProperty:o=e.collectionNavigation(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.EntityNavigationProperty:o=e.singleNavigation(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.ComplexCollectionProperty:o=e.collectionPath(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.ComplexProperty:o=e.complexPath(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.PrimitiveCollectionProperty:o=e.collectionPath(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.PrimitiveKeyProperty:case i.default.TokenType.PrimitiveProperty:o=e.singlePath(t,a,r.metadata),delete r.metadata;break;case i.default.TokenType.StreamProperty:o=e.boundOperation(t,a,r.metadata),delete r.metadata}return o&&(a=o.next),i.default.tokenize(t,l,a,{path:r,navigation:o},i.default.TokenType.PropertyPath,o)}},e.collectionPath=function(t,a,n){return l.default.countExpr(t,a)||e.boundOperation(t,a,!0,n)},e.singlePath=function(t,a,n){return l.default.valueExpr(t,a)||e.boundOperation(t,a,!1,n)},e.complexPath=function(t,a,n){var r,o,l=a;if(47===t[a]&&(r=u.default.qualifiedComplexTypeName(t,a+1,n))&&(a=r.next),47===t[a]){if(!(o=e.propertyPath(t,a+1,n)))return;a=o.next}else o=e.boundOperation(t,a,!1,n);if(r||o)return i.default.tokenize(t,l,a,{name:r,path:o},i.default.TokenType.ComplexPath,o)},e.boundOperation=function(t,a,n,r){if(47===t[a]){var o=a;a++;var l=e.boundEntityColFuncCall(t,a,n,r)||e.boundEntityFuncCall(t,a,n,r)||e.boundComplexColFuncCall(t,a,n,r)||e.boundComplexFuncCall(t,a,n,r)||e.boundPrimitiveColFuncCall(t,a,n,r)||e.boundPrimitiveFuncCall(t,a,n,r)||e.boundActionCall(t,a,n,r);if(l){var f,d;switch(a=l.next,l.type){case i.default.TokenType.BoundActionCall:break;case i.default.TokenType.BoundEntityCollectionFunctionCall:d=e.collectionNavigation(t,a,l.value.call.metadata),delete l.metadata;break;case i.default.TokenType.BoundEntityFunctionCall:d=e.singleNavigation(t,a,l.value.call.metadata),delete l.metadata;break;case i.default.TokenType.BoundComplexCollectionFunctionCall:47===t[a]&&(f=u.default.qualifiedComplexTypeName(t,a+1,l.value.call.metadata))&&(a=f.next),d=e.collectionPath(t,a,l.value.call.metadata),delete l.metadata;break;case i.default.TokenType.BoundComplexFunctionCall:d=e.complexPath(t,a,l.value.call.metadata),delete l.metadata;break;case i.default.TokenType.BoundPrimitiveCollectionFunctionCall:d=e.collectionPath(t,a,l.value.call.metadata),delete l.metadata;break;case i.default.TokenType.BoundPrimitiveFunctionCall:d=e.singlePath(t,a,l.value.call.metadata),delete l.metadata}return d&&(a=d.next),i.default.tokenize(t,o,a,{operation:l,name:f,navigation:d},i.default.TokenType.BoundOperation,d)}}},e.boundActionCall=function(e,t,a,n){var o=u.default.namespace(e,t);if(o!==t){var l=t;if(46===e[t=o]){t++;var f=u.default.action(e,t,a,n);if(f)return f.value.namespace=r.default.stringify(e,l,o),i.default.tokenize(e,l,f.next,f,i.default.TokenType.BoundActionCall,f)}}},e.boundFunctionCall=function(t,a,n,o,l,f){var d=u.default.namespace(t,a);if(d!==a){var p=a;if(46===t[a=d]){var c=n(t,++a,l,f);if(c){c.value.namespace=r.default.stringify(t,p,d),a=c.next;var s=e.functionParameters(t,a);if(s)return a=s.next,i.default.tokenize(t,p,a,{call:c,params:s},o,c)}}}},e.boundEntityFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.entityFunction,i.default.TokenType.BoundEntityFunctionCall,n,r)},e.boundEntityColFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.entityColFunction,i.default.TokenType.BoundEntityCollectionFunctionCall,n,r)},e.boundComplexFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.complexFunction,i.default.TokenType.BoundComplexFunctionCall,n,r)},e.boundComplexColFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.complexColFunction,i.default.TokenType.BoundComplexCollectionFunctionCall,n,r)},e.boundPrimitiveFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.primitiveFunction,i.default.TokenType.BoundPrimitiveFunctionCall,n,r)},e.boundPrimitiveColFuncCall=function(t,a,n,r){return e.boundFunctionCall(t,a,u.default.primitiveColFunction,i.default.TokenType.BoundPrimitiveCollectionFunctionCall,n,r)},e.actionImportCall=function(e,t,a){var n=u.default.actionImport(e,t,a);if(n)return i.default.tokenize(e,t,n.next,n,i.default.TokenType.ActionImportCall,n)},e.functionImportCall=function(t,a,n){var r=u.default.entityFunctionImport(t,a,n)||u.default.entityColFunctionImport(t,a,n)||u.default.complexFunctionImport(t,a,n)||u.default.complexColFunctionImport(t,a,n)||u.default.primitiveFunctionImport(t,a,n)||u.default.primitiveColFunctionImport(t,a,n);if(r){var o=a;a=r.next;var l=e.functionParameters(t,a);if(l)return a=l.next,i.default.tokenize(t,o,a,{import:r,params:l.value},r.type+"Call",r)}},e.functionParameters=function(t,a,n){var r=i.default.OPEN(t,a);if(r){var o=a;a=r;for(var u=[],l=e.functionParameter(t,a);l;){u.push(l),a=l.next;var f=i.default.COMMA(t,a);if(!f)break;if(a=f,!(l=e.functionParameter(t,a)))return}var d=i.default.CLOSE(t,a);if(d)return a=d,i.default.tokenize(t,o,a,u,i.default.TokenType.FunctionParameters)}},e.functionParameter=function(e,t,a){var n=l.default.parameterName(e,t);if(n){var r=t;t=n.next;var u=i.default.EQ(e,t);if(u){t=u;var f=l.default.parameterAlias(e,t)||o.default.primitiveLiteral(e,t);if(f)return t=f.next,i.default.tokenize(e,r,t,{name:n,value:f},i.default.TokenType.FunctionParameter)}}},e.crossjoin=function(e,t,a){if(r.default.equals(e,t,"$crossjoin")){var n=t;t+=10;var o=i.default.OPEN(e,t);if(o){t=o;var l=[],f=u.default.entitySetName(e,t,a);if(f){for(;f;){l.push(f),t=f.next;var d=i.default.COMMA(e,t);if(!d)break;if(t=d,!(f=u.default.entitySetName(e,t,a)))return}if(i.default.CLOSE(e,t))return i.default.tokenize(e,n,t,{names:l},i.default.TokenType.Crossjoin)}}}},e.all=function(e,t){if(r.default.equals(e,t,"$all"))return i.default.tokenize(e,t,t+4,"$all",i.default.TokenType.AllResource)}}(n=t.ResourcePath||(t.ResourcePath={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=a(4),i=a(5),o=a(6),u=a(10);t.parserFactory=function(e){return function(t,a){a=a||{};for(var n=new Uint16Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);var i=e(n,0,a.metadata);if(!i)throw new Error("Fail at 0");if(i.next<n.length)throw new Error("Unexpected character at "+i.next);return i}};var l=function(){function e(){}return e.prototype.odataUri=function(e,a){return t.parserFactory(u.default.odataUri)(e,a)},e.prototype.resourcePath=function(e,a){return t.parserFactory(o.default.resourcePath)(e,a)},e.prototype.query=function(e,a){return t.parserFactory(i.default.queryOptions)(e,a)},e.prototype.filter=function(e,a){return t.parserFactory(r.default.boolCommonExpr)(e,a)},e.prototype.keys=function(e,a){return t.parserFactory(r.default.keyPredicate)(e,a)},e.prototype.literal=function(e,a){return t.parserFactory(n.default.primitiveLiteral)(e,a)},e}();t.Parser=l,t.odataUri=function(e,a){return t.parserFactory(u.default.odataUri)(e,a)},t.resourcePath=function(e,a){return t.parserFactory(o.default.resourcePath)(e,a)},t.query=function(e,a){return t.parserFactory(i.default.queryOptions)(e,a)},t.filter=function(e,a){return t.parserFactory(r.default.boolCommonExpr)(e,a)},t.keys=function(e,a){return t.parserFactory(r.default.keyPredicate)(e,a)},t.literal=function(e,a){return t.parserFactory(n.default.primitiveLiteral)(e,a)}},function(e,t,a){"use strict";a.r(t),a.d(t,"filter",function(){return r});var n=a(7);function r(e){return Object(n.filter)(e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),i=a(1),o=a(2),u=a(3),l=a(4);!function(e){function t(e,t){var a=i.default.beginArray(e,t);if(a!==t){var n=t;t=a;var r=[],o=l.default.rootExpr(e,t);if(o)for(;o;){if(r.push(o),t=o.next,(f=i.default.endArray(e,t))>t){t=f;break}var u=i.default.valueSeparator(e,t);if(u===t)return;if(t=u,!(o=l.default.rootExpr(e,t)))return}else{var f;if((f=i.default.endArray(e,t))===t)return;t=f}return i.default.tokenize(e,n,t,{items:r},i.default.TokenType.Array)}}function a(t,a){return e.stringInJSON(t,a)||e.numberInJSON(t,a)||e.booleanInJSON(t,a)||e.nullInJSON(t,a)}e.complexColInUri=function(t,a){var n=i.default.beginArray(t,a);if(n!==a){var r=a;a=n;var o=[],u=e.complexInUri(t,a);if(u)for(;u;){if(o.push(u),a=u.next,(f=i.default.endArray(t,a))>a){a=f;break}var l=i.default.valueSeparator(t,a);if(l===a)return;if(a=l,!(u=e.complexInUri(t,a)))return}else{var f;if((f=i.default.endArray(t,a))===a)return;a=f}return i.default.tokenize(t,r,a,{items:o},i.default.TokenType.Array)}},e.complexInUri=function(t,a){var n=i.default.beginObject(t,a);if(n!==a){var r=a;a=n;var o=[],u=e.annotationInUri(t,a)||e.primitivePropertyInUri(t,a)||e.complexPropertyInUri(t,a)||e.collectionPropertyInUri(t,a)||e.navigationPropertyInUri(t,a);if(u)for(;u;){if(o.push(u),a=u.next,(f=i.default.endObject(t,a))>a){a=f;break}var l=i.default.valueSeparator(t,a);if(l===a)return;if(a=l,!(u=e.annotationInUri(t,a)||e.primitivePropertyInUri(t,a)||e.complexPropertyInUri(t,a)||e.collectionPropertyInUri(t,a)||e.navigationPropertyInUri(t,a)))return}else{var f;if((f=i.default.endObject(t,a))===a)return;a=f}return i.default.tokenize(t,r,a,{items:o},i.default.TokenType.Object)}},e.collectionPropertyInUri=function(t,a){var n=i.default.quotationMark(t,a);if(n!==a){var r=a;a=n;var o=u.default.primitiveColProperty(t,a)||u.default.complexColProperty(t,a);if(o&&(a=o.next,(n=i.default.quotationMark(t,a))!==a)){a=n;var l=i.default.nameSeparator(t,a);if(l!==a){a=l;var f=o.type===i.default.TokenType.PrimitiveCollectionProperty?e.primitiveColInUri(t,a):e.complexColInUri(t,a);if(f)return a=f.next,i.default.tokenize(t,r,a,{key:o,value:f},i.default.TokenType.Property)}}}},e.primitiveColInUri=function(t,a){var n=i.default.beginArray(t,a);if(n!==a){var r=a;a=n;var o=[],u=e.primitiveLiteralInJSON(t,a);if(u)for(;u;){if(o.push(u),a=u.next,(f=i.default.endArray(t,a))>a){a=f;break}var l=i.default.valueSeparator(t,a);if(l===a)return;if(a=l,!(u=e.primitiveLiteralInJSON(t,a)))return}else{var f;if((f=i.default.endArray(t,a))===a)return;a=f}return i.default.tokenize(t,r,a,{items:o},i.default.TokenType.Array)}},e.complexPropertyInUri=function(t,a){var n=i.default.quotationMark(t,a);if(n!==a){var r=a;a=n;var o=u.default.complexProperty(t,a);if(o&&(a=o.next,(n=i.default.quotationMark(t,a))!==a)){a=n;var l=i.default.nameSeparator(t,a);if(l!==a){a=l;var f=e.complexInUri(t,a);if(f)return a=f.next,i.default.tokenize(t,r,a,{key:o,value:f},i.default.TokenType.Property)}}}},e.annotationInUri=function(t,a){var n=i.default.quotationMark(t,a);if(n!==a){var o=a;a=n;var l=i.default.AT(t,a);if(l){a=l;var f=u.default.namespace(t,a);if(f!==a){var d=a;if(46===t[a=f]){a++;var p=u.default.termName(t,a);if(p&&(a=p.next,(n=i.default.quotationMark(t,a))!==a)){a=n;var c=i.default.nameSeparator(t,a);if(c!==a){a=c;var s=e.complexInUri(t,a)||e.complexColInUri(t,a)||e.primitiveLiteralInJSON(t,a)||e.primitiveColInUri(t,a);if(s)return a=s.next,i.default.tokenize(t,o,a,{key:"@"+r.default.stringify(t,d,f)+"."+p.raw,value:s},i.default.TokenType.Annotation)}}}}}}},e.keyValuePairInUri=function(e,t,a,n){var r=i.default.quotationMark(e,t);if(r!==t){var o=t,u=a(e,t=r);if(u&&(t=u.next,(r=i.default.quotationMark(e,t))!==t)){t=r;var l=i.default.nameSeparator(e,t);if(l!==t){var f=n(e,t=l);if(f)return t=f.next,i.default.tokenize(e,o,t,{key:u,value:f},i.default.TokenType.Property)}}}},e.primitivePropertyInUri=function(t,n){return e.keyValuePairInUri(t,n,u.default.primitiveProperty,a)},e.navigationPropertyInUri=function(t,a){return e.singleNavPropInJSON(t,a)||e.collectionNavPropInJSON(t,a)},e.singleNavPropInJSON=function(t,a){return e.keyValuePairInUri(t,a,u.default.entityNavigationProperty,l.default.rootExpr)},e.collectionNavPropInJSON=function(a,n){return e.keyValuePairInUri(a,n,u.default.entityColNavigationProperty,t)},e.rootExprCol=t,e.primitiveLiteralInJSON=a,e.stringInJSON=function(t,a){var n=i.default.quotationMark(t,a);if(n!==a){var r=a;a=n;for(var o=e.charInJSON(t,a);o>a;)a=o,o=e.charInJSON(t,a);if((n=i.default.quotationMark(t,a))!==a)return a=n,i.default.tokenize(t,r,a,"string",i.default.TokenType.Literal)}},e.charInJSON=function(e,t){var a=i.default.escape(e,t);if(a>t){if(r.default.equals(e,a,"%2F"))return a+3;if(r.default.equals(e,a,"/")||r.default.equals(e,a,"b")||r.default.equals(e,a,"f")||r.default.equals(e,a,"n")||r.default.equals(e,a,"r")||r.default.equals(e,a,"t"))return a+1;if(r.default.equals(e,a,"u")&&r.default.required(e,a+1,i.default.HEXDIG,4,4))return a+5;var n=i.default.escape(e,a);if(n>a)return n;if((o=i.default.quotationMark(e,a))>a)return o}else{var o;if((o=i.default.quotationMark(e,t))===t)return t+1}},e.numberInJSON=function(e,t){var a=o.default.doubleValue(e,t)||o.default.int64Value(e,t);if(a)return a.value="number",a},e.booleanInJSON=function(e,t){return r.default.equals(e,t,"true")?i.default.tokenize(e,t,t+4,"boolean",i.default.TokenType.Literal):r.default.equals(e,t,"false")?i.default.tokenize(e,t,t+5,"boolean",i.default.TokenType.Literal):void 0},e.nullInJSON=function(e,t){if(r.default.equals(e,t,"null"))return i.default.tokenize(e,t,t+4,"null",i.default.TokenType.Literal)},e.arrayOrObject=function(t,a){var n=e.complexColInUri(t,a)||e.complexInUri(t,a)||e.rootExprCol(t,a)||e.primitiveColInUri(t,a);if(n)return i.default.tokenize(t,a,n.next,n,i.default.TokenType.ArrayOrObject)}}(n=t.ArrayOrObject||(t.ArrayOrObject={})),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1),i=a(5),o=a(6);!function(e){e.odataUri=function(e,t,a){for(var n=o.default.resourcePath(e,t,a);!n&&t<e.length;){for(;47!==e[++t]&&t<e.length;);n=o.default.resourcePath(e,t,a)}if(n){var u,l=t;if(t=n.next,a=n.metadata,63===e[t]){if(!(u=i.default.queryOptions(e,t+1,a)))return;t=u.next,delete n.metadata}return r.default.tokenize(e,l,t,{resource:n,query:u},r.default.TokenType.ODataUri,{metadata:a})}}}(n=t.ODataUri||(t.ODataUri={})),t.default=n}]);